#+TITLE: MySQL 源码阅读笔记
#+AUTHOR: Jinghui Hu
#+EMAIL: hujinghui@buaa.edu.cn
#+DATE: <2023-02-01 Wed 11:08:13>
#+HTML_LINK_UP: ../readme.html
#+HTML_LINK_HOME: ../index.html
#+SETUPFILE: ~/.emacs.d/site-lisp/org-html-themes/setup/theme-readtheorg-local.setup
#+STARTUP: indent cache num inlineimages


* 数据结构
** 线程信息
[[file:../../../github/mysql/mysql-server/sql/sql_class.h::class THD : public MDL_context_owner,][class THD]] 记录 Query 连接执行信息
1. m_thread_id 线程 ID, 连接 connection id
2. m_query_id 请求 ID
3. m_query_str SQL 字符串, 使用 ~thd->query()~ 获取

** 事务相关
1. 回滚指针 [[file:../../../github/mysql/mysql-server/storage/innobase/include/trx0types.h::/** Rollback pointer (DB_ROLL_PTR, DATA_ROLL_PTR) */][ROLL_PTR]]
* 执行流程
1. [[file:../../../../code/github/mysql/mysql-server/sql/sql_parse.cc::void dispatch_sql_command(THD *thd, Parser_state *parser_state) {][dispatch_sql_command]]
