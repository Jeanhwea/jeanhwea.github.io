<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-01-10 Fri 11:07 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>在 Oracle Linux 上安装 Oracle 11g 数据库</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Jinghui Hu" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../readme.html"> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div><div id="content">
<h1 class="title">在 Oracle Linux 上安装 Oracle 11g 数据库</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb0c61b9">1. 安装文件</a>
<ul>
<li><a href="#org8d3bfc7">1.1. 操作系统的选择</a></li>
<li><a href="#org3fac747">1.2. 数据库安装文件</a></li>
</ul>
</li>
<li><a href="#orgd02392d">2. 前置准备和检验工作</a>
<ul>
<li><a href="#orge0ddf37">2.1. 检验操作系统的内存</a></li>
<li><a href="#orgf7ff5a6">2.2. 检验操作系统的存储大小</a></li>
<li><a href="#orgda41ab4">2.3. 系统的内核版本要求</a></li>
<li><a href="#org851f767">2.4. 必要的软件包</a>
<ul>
<li><a href="#org260276d">2.4.1. 配置本地的 yum 源</a></li>
<li><a href="#org078d5fa">2.4.2. 安装相关依赖包</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org2fc2f28">3. 操作系统相关配置</a>
<ul>
<li><a href="#org1c0725b">3.1. 配置系统的 IP</a></li>
<li><a href="#orgbfcd870">3.2. 配置计算机名</a></li>
<li><a href="#orge5b5596">3.3. 创建基本的用户和用户组</a></li>
<li><a href="#org1cb9cd7">3.4. 配置内核参数</a></li>
<li><a href="#org6daa5ff">3.5. 修改用户的限制</a></li>
<li><a href="#orgcd4d347">3.6. 添加如下的环境变量</a></li>
<li><a href="#org41d3d63">3.7. 创建安装目录</a></li>
<li><a href="#org160f73b">3.8. 禁用 SELINUXX 和系统防火墙</a></li>
<li><a href="#org74d845c">3.9. 关闭系统的防火墙</a></li>
</ul>
</li>
<li><a href="#orgef652f7">4. 配置 Oracle 参数</a>
<ul>
<li><a href="#org55ca87a">4.1. 启动程序</a></li>
<li><a href="#org3e1944b">4.2. Oracle 11g 连通性测试命令行工具</a></li>
<li><a href="#org2cfb922">4.3. 数据库 GUI 管理工具</a></li>
</ul>
</li>
<li><a href="#org84a0e70">5. 参考链接</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgb0c61b9" class="outline-2">
<h2 id="orgb0c61b9"><span class="section-number-2">1</span> 安装文件</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org8d3bfc7" class="outline-3">
<h3 id="org8d3bfc7"><span class="section-number-3">1.1</span> 操作系统的选择</h3>
<div class="outline-text-3" id="text-1-1">
<p>
本教程是基于 Oracle Linux Release6 Update9 操作系统来安装的，准备文件为
</p>
<ul class="org-ul">
<li>OracleLinux-R6-U9-Server-x86<sub>64</sub>-dvd.iso</li>
</ul>

<div class="org-src-container">
<pre class="src src-text">$ cksum OracleLinux-R6-U9-Server-x86_64-dvd.iso
3134304474 4048551936 OracleLinux-R6-U9-Server-x86_64-dvd.iso
</pre>
</div>
</div>
</div>

<div id="outline-container-org3fac747" class="outline-3">
<h3 id="org3fac747"><span class="section-number-3">1.2</span> 数据库安装文件</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Oracle 数据库选择 11g R2 下面两个是数据的安装文件
</p>

<ul class="org-ul">
<li>p13390677<sub>112040</sub><sub>Linux</sub>-x86-64<sub>1of7.zip</sub></li>
<li>p13390677<sub>112040</sub><sub>Linux</sub>-x86-64<sub>2of7.zip</sub></li>
</ul>

<p>
将两个文件解压到统一个文件夹中，得到一个 <code>database</code> 的文件夹
</p>
<div class="org-src-container">
<pre class="src src-sh">unzip p13390677_112040_Linux-x86-64_1of7.zip
unzip p13390677_112040_Linux-x86-64_2of7.zip
</pre>
</div>

<div class="org-src-container">
<pre class="src src-text">[oracle@orange219 Downloads]$ cksum p13390677_112040_Linux-x86-64_1of7.zip
153454328 1395582860 p13390677_112040_Linux-x86-64_1of7.zip
[oracle@orange219 Downloads]$ cksum p13390677_112040_Linux-x86-64_2of7.zip
2027415580 1151304589 p13390677_112040_Linux-x86-64_2of7.zip
[oracle@orange219 Downloads]$
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd02392d" class="outline-2">
<h2 id="orgd02392d"><span class="section-number-2">2</span> 前置准备和检验工作</h2>
<div class="outline-text-2" id="text-2">
<p>
在安装操作系统时就需要提前注意以下的配置
</p>
</div>

<div id="outline-container-orge0ddf37" class="outline-3">
<h3 id="orge0ddf37"><span class="section-number-3">2.1</span> 检验操作系统的内存</h3>
<div class="outline-text-3" id="text-2-1">
<p>
官方文档中说操作系统的 RAM 至少 1G，但是建议分配 2G 以上。另外，还需要 swap 分
区的分配，在安装操作系统时就要提前预留好对应的 swap 分区大小，根据官网文档建议如下：
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">RAM</th>
<th scope="col" class="org-left">swap</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">1G 到 2G 之间</td>
<td class="org-left">RAM 大小的 1.5 倍</td>
</tr>

<tr>
<td class="org-left">2G 到 16G 之间</td>
<td class="org-left">和 RAM 同等大小</td>
</tr>

<tr>
<td class="org-left">16G 以上</td>
<td class="org-left">16G</td>
</tr>
</tbody>
</table>

<p>
检测操作系统 RAM 和 Swap 的命令如下：
</p>
<div class="org-src-container">
<pre class="src src-sh">grep MemTotal /proc/meminfo
grep SwapTotal /proc/meminfo
free
</pre>
</div>

<p>
Oracle 11g 包含 <b>自动内存管理</b> 特性，该特性需要更多的共享内存 <code>/dev/shm</code> 和文
件描述符，可以通过以下命令查看可用的共享内存大小，需要注意的是可用的共享内存
值需要比 <code>MEMORY_MAX_TARGET</code> 和 <code>MEMORY_TARGET</code> 都要大
</p>
<div class="org-src-container">
<pre class="src src-sh">df -h /dev/shm/
</pre>
</div>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #859900;">SQL</span>&gt; show <span style="color: #859900;">parameter</span> target

<span style="color: #859900;">NAME</span>                                 <span style="color: #859900;">TYPE</span>        <span style="color: #859900;">VALUE</span>
<span style="color: #93a1a1; font-style: italic;">------------------------------------ ----------- ------------------------------</span>
archive_lag_target                   <span style="color: #268bd2;">integer</span>     0
db_flashback_retention_target        <span style="color: #268bd2;">integer</span>     1440
fast_start_io_target                 <span style="color: #268bd2;">integer</span>     0
fast_start_mttr_target               <span style="color: #268bd2;">integer</span>     0
memory_max_target                    big <span style="color: #268bd2;">integer</span> 0
memory_target                        big <span style="color: #268bd2;">integer</span> 0
parallel_servers_target              <span style="color: #268bd2;">integer</span>     512
pga_aggregate_target                 big <span style="color: #268bd2;">integer</span> 3217M
sga_target                           big <span style="color: #268bd2;">integer</span> 9664M
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7ff5a6" class="outline-3">
<h3 id="orgf7ff5a6"><span class="section-number-3">2.2</span> 检验操作系统的存储大小</h3>
<div class="outline-text-3" id="text-2-2">
<p>
为了配合 Oracle 安装包释放安装程序，操作系统的 <code>/tmp</code> 文件夹需要有超过 1G 的可
用存储空间
</p>
<div class="org-src-container">
<pre class="src src-sh">df -h /tmp
</pre>
</div>

<p>
另外 Oracle 11g 数据库安装后大约要占用低于 5G 的硬盘存储
</p>
</div>
</div>

<div id="outline-container-orgda41ab4" class="outline-3">
<h3 id="orgda41ab4"><span class="section-number-3">2.3</span> 系统的内核版本要求</h3>
<div class="outline-text-3" id="text-2-3">
<p>
在 Oracle Linux 6.9 中需要内核版本大于 <code>2.6.32-71.el6.x86_64</code> ，默认的内核就
满足要求
</p>

<div class="org-src-container">
<pre class="src src-sh">[oracle@orange139 database]$ uname -r
4.1.12-61.1.28.el6uek.x86_64
</pre>
</div>
</div>
</div>

<div id="outline-container-org851f767" class="outline-3">
<h3 id="org851f767"><span class="section-number-3">2.4</span> 必要的软件包</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Oracle 11g 有一些必要的安装文件包，在 Oracle Linux 6 中所需要的包
</p>

<p>
安装 database 所需要的包
</p>
<div class="org-src-container">
<pre class="src src-text">binutils-2.20.51.0.2-5.11.el6 (x86_64)
compat-libcap1-1.10-1 (x86_64)
compat-libstdc++-33-3.2.3-69.el6 (x86_64)
compat-libstdc++-33-3.2.3-69.el6.i686
gcc-4.4.4-13.el6 (x86_64)
gcc-c++-4.4.4-13.el6 (x86_64)
glibc-2.12-1.7.el6 (i686)
glibc-2.12-1.7.el6 (x86_64)
glibc-devel-2.12-1.7.el6 (x86_64)
glibc-devel-2.12-1.7.el6.i686
ksh
libgcc-4.4.4-13.el6 (i686)
libgcc-4.4.4-13.el6 (x86_64)
libstdc++-4.4.4-13.el6 (x86_64)
libstdc++-4.4.4-13.el6.i686
libstdc++-devel-4.4.4-13.el6 (x86_64)
libstdc++-devel-4.4.4-13.el6.i686
libaio-0.3.107-10.el6 (x86_64)
libaio-0.3.107-10.el6.i686
libaio-devel-0.3.107-10.el6 (x86_64)
libaio-devel-0.3.107-10.el6.i686
make-3.81-19.el6
sysstat-9.0.4-11.el6 (x86_64)
</pre>
</div>

<p>
安装 client 需要的包
</p>
<div class="org-src-container">
<pre class="src src-text">unixODBC-2.2.14-11.el6 (x86_64) or later
unixODBC-2.2.14-11.el6.i686 or later
unixODBC-devel-2.2.14-11.el6 (x86_64) or later
unixODBC-devel-2.2.14-11.el6.i686 or later
</pre>
</div>
</div>

<div id="outline-container-org260276d" class="outline-4">
<h4 id="org260276d"><span class="section-number-4">2.4.1</span> 配置本地的 yum 源</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
将系统安装的 iso 包加载的 cdrom 中
</p>
<div class="org-src-container">
<pre class="src src-sh">mkdir -p /mnt/cdrom &amp;&amp; mount /dev/cdrom /mnt/cdrom
</pre>
</div>

<p>
添加本地的 repo 配置文件
</p>
<div class="org-src-container">
<pre class="src src-sh">vim /etc/yum.repos.d/local-yum.repo
</pre>
</div>

<div class="org-src-container">
<pre class="src src-conf">[<span style="color: #268bd2;">local_server</span>]
<span style="color: #6c71c4;">name</span>=Oracle Linux 6 Local DVD
<span style="color: #6c71c4;">baseurl</span>=file:///mnt/cdrom/Server
<span style="color: #6c71c4;">gpgcheck</span>=0
<span style="color: #6c71c4;">enabled</span>=1
</pre>
</div>

<p>
检测是否配置成功
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">&#19979;&#36733;&#32531;&#23384;</span>
yum makecache
<span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">&#21015;&#20986;&#21487;&#23433;&#35013;&#21253;</span>
yum list
</pre>
</div>
</div>
</div>

<div id="outline-container-org078d5fa" class="outline-4">
<h4 id="org078d5fa"><span class="section-number-4">2.4.2</span> 安装相关依赖包</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
直接使用 yum 管理器安装
</p>
<div class="org-src-container">
<pre class="src src-sh">yum install binutils compat-libcap1-1.10 compat-libstdc++-33-3.2.3 gcc-4.4.4 <span style="color: #2aa198;">\</span>
    gcc-c++-4.4.4 glibc-2.12 glibc-devel-2.12 ksh libgcc-4.4.4 libstdc++-4.4.4 <span style="color: #2aa198;">\</span>
    libstdc++-devel-4.4.4 libaio-0.3.107 libaio-devel-0.3.107 make-3.81 sysstat-9.0.4 <span style="color: #2aa198;">\</span>
    unixODBC unixODBC-devel
</pre>
</div>

<p>
安装 <a href="https://github.com/hanslub42/rlwrap/releases">rlwrap</a> 工具 （可选项）
</p>
<div class="org-src-container">
<pre class="src src-sh">./configure --prefix=/usr/local
make
make install
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org2fc2f28" class="outline-2">
<h2 id="org2fc2f28"><span class="section-number-2">3</span> 操作系统相关配置</h2>
<div class="outline-text-2" id="text-3">
<p>
配置 IP 、主机名、用户、用户组、防火墙等一系列参数
</p>
</div>

<div id="outline-container-org1c0725b" class="outline-3">
<h3 id="org1c0725b"><span class="section-number-3">3.1</span> 配置系统的 IP</h3>
<div class="outline-text-3" id="text-3-1">
<p>
修改操作系统的 <code>/etc/sysconfig/network-scripts/ifcfg-eth1</code> 文件
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #6c71c4;">TYPE</span>=Ethernet
<span style="color: #6c71c4;">BOOTPROTO</span>=none
<span style="color: #6c71c4;">IPV4_FAILURE_FATAL</span>=yes
<span style="color: #6c71c4;">IPV6INIT</span>=no
<span style="color: #6c71c4;">NAME</span>=eth1
<span style="color: #6c71c4;">ONBOOT</span>=yes
<span style="color: #6c71c4;">IPADDR</span>=192.168.0.131
<span style="color: #6c71c4;">PREFIX</span>=24
<span style="color: #6c71c4;">GATEWAY</span>=192.168.0.1
<span style="color: #6c71c4;">DEFROUTE</span>=yes
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbfcd870" class="outline-3">
<h3 id="orgbfcd870"><span class="section-number-3">3.2</span> 配置计算机名</h3>
<div class="outline-text-3" id="text-3-2">
<p>
编辑 <code>/etc/hosts</code> 文件，添加如下主机名到 IP 的映射
</p>
<div class="org-src-container">
<pre class="src src-text">192.168.0.131 orange131 orange131
</pre>
</div>

<p>
配置 <code>/etc/sysconfig/network</code>
</p>
<div class="org-src-container">
<pre class="src src-text">NETWORKING=yes
HOSTNAME=orange131
</pre>
</div>

<p>
测试是否修改成功
</p>
<div class="org-src-container">
<pre class="src src-sh">hostname
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5b5596" class="outline-3">
<h3 id="orge5b5596"><span class="section-number-3">3.3</span> 创建基本的用户和用户组</h3>
<div class="outline-text-3" id="text-3-3">
<p>
新建如下用户组
</p>
<ul class="org-ul">
<li>The Oracle Inventory group (typically, <code>oinstall</code> )</li>
<li>The OSDBA group (typically, <code>dba</code> )</li>
<li>The OSOPER group (optional. Typically, <code>oper</code> )</li>
</ul>

<p>
新建 oracle 用户
</p>
<ul class="org-ul">
<li>The Oracle software owner (typically, <code>oracle</code> )</li>
</ul>

<p>
新建 oinstall, dba 和 oper 用户组
</p>
<div class="org-src-container">
<pre class="src src-sh">groupadd oinstall
groupadd dba
groupadd oper
</pre>
</div>

<p>
新建 oracle 用户
</p>
<div class="org-src-container">
<pre class="src src-sh">useradd -g oinstall -G dba,oper oracle
<span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">&#22914;&#26524; oracle &#29992;&#25143;&#24050;&#32463;&#23384;&#22312;&#65292;&#21017;&#30452;&#25509;&#21152;&#20837;&#23545;&#24212;&#29992;&#25143;&#32452;&#21363;&#21487;</span>
<span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">usermod -g oinstall -G dba,oper oracle</span>
</pre>
</div>

<p>
配置 oracle 用户的密码
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #6c71c4;">echo</span> system | passwd --stdin oracle
</pre>
</div>

<p>
检验建立好的 oracle 用户
</p>
<div class="org-src-container">
<pre class="src src-sh">id oracle
</pre>
</div>
<div class="org-src-container">
<pre class="src src-text">[root@orange ~]# id oracle
uid=500(oracle) gid=500(oinstall) groups=500(oinstall),501(dba)
</pre>
</div>
</div>
</div>

<div id="outline-container-org1cb9cd7" class="outline-3">
<h3 id="org1cb9cd7"><span class="section-number-3">3.4</span> 配置内核参数</h3>
<div class="outline-text-3" id="text-3-4">
<p>
添加或修改配置文件 <code>/etc/sysctl.conf</code> ， 如下内核参数。内核参数一般是要大于如
下要求的最小值，对于实际的系统可以需要参考系统默认参数，并计算调优一些参数，
修改默认设置
</p>

<div class="org-src-container">
<pre class="src src-conf"># &#20849;&#20139;&#20869;&#23384; cat /proc/sys/kernel/shmall
# shmmni &#32570;&#30465; 4096 &#21363;&#21487;&#65292;shmmax &#26368;&#23567; 536870912, &#26368;&#22823;&#20026;&#29289;&#29702;&#20869;&#23384;&#20943;&#23567; 1 &#23383;&#33410;
<span style="color: #6c71c4;"># 32G &#20869;&#23384;&#22823;&#32422;&#38656;&#35201;&#65306; 32*1024*1024*1024-1</span> = 34359738367
<span style="color: #6c71c4;">kernel.shmmax</span> = 536870912
<span style="color: #6c71c4;">kernel.shmmni</span> = 4096
# Linux &#30340;&#20849;&#20139;&#20869;&#23384;&#39029;&#22823;&#23567;&#20026; 4K&#65292;
<span style="color: #6c71c4;"># &#23545;&#20110; 32G &#20869;&#23384;&#30340;&#31995;&#32479;&#22823;&#32422;&#38656;&#35201;&#26368;&#22823;&#30340;&#39029;&#25968;&#20026;: 32*1024*1024/4</span> = 8388608
<span style="color: #6c71c4;">kernel.shmall</span> = 2097152

# &#36827;&#31243;&#20043;&#38388;&#36890;&#20449;&#28040;&#24687;&#22823;&#23567;&#30340;&#26368;&#22823;&#20540;
<span style="color: #6c71c4;">kernel.msgmax</span> = 65536
# &#20449;&#21495;&#37327;&#21442;&#25968;&#65306; semmsl semmns semopm semmni
<span style="color: #6c71c4;">kernel.sem</span> = 250 32000 100 128

# &#25991;&#20214;&#21477;&#26564;&#25968;&#37327;&#38480;&#21046;
<span style="color: #6c71c4;">fs.aio-max-nr</span> = 1048576
<span style="color: #6c71c4;">fs.file-max</span> = 6815744

# &#24212;&#29992;&#31243;&#24207;&#21487;&#29992;&#30340; ipv4 &#31471;&#21475;&#33539;&#22260;
<span style="color: #6c71c4;">net.ipv4.ip_local_port_range</span> = 9000 65500

# &#22871;&#25509;&#23383;&#35835;&#20889;&#32531;&#20914;&#22823;&#23567;
<span style="color: #6c71c4;">net.core.rmem_default</span> = 262144
<span style="color: #6c71c4;">net.core.rmem_max</span> = 4194304
<span style="color: #6c71c4;">net.core.wmem_default</span> = 262144
<span style="color: #6c71c4;">net.core.wmem_max</span> = 1048576
</pre>
</div>

<p>
可以使用如下命令查看一些内核参数
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">&#37197;&#32622;&#30340;&#21442;&#25968;&#65292;&#30830;&#20445;&#37197;&#32622;&#25991;&#20214;&#26684;&#24335;&#27491;&#30830;</span>
sysctl -p
<span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">&#25171;&#21360;&#24403;&#21069;&#25152;&#26377;&#30340;&#21442;&#25968;&#22823;&#23567;</span>
sysctl -a
</pre>
</div>
<p>
内核参数文件修改后重启生效
</p>
</div>
</div>

<div id="outline-container-org6daa5ff" class="outline-3">
<h3 id="org6daa5ff"><span class="section-number-3">3.5</span> 修改用户的限制</h3>
<div class="outline-text-3" id="text-3-5">
<p>
编辑 <code>/etc/security/limits.conf</code> 文件，添加如下配置行
</p>

<div class="org-src-container">
<pre class="src src-conf">oracle   soft   nproc    131072
oracle   hard   nproc    131072
oracle   soft   nofile   131072
oracle   hard   nofile   131072
oracle   soft   core     unlimited
oracle   hard   core     unlimited
oracle   soft   memlock  50000000
oracle   hard   memlock  50000000
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd4d347" class="outline-3">
<h3 id="orgcd4d347"><span class="section-number-3">3.6</span> 添加如下的环境变量</h3>
<div class="outline-text-3" id="text-3-6">
<p>
为了后面操作简单，需要添加一些常用的环境变量和命令别名
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">&#22522;&#30784;&#21464;&#37327;</span>
<span style="color: #6c71c4;">export</span> <span style="color: #6c71c4;">ORACLE_BASE</span>=/u01/app/oracle
<span style="color: #6c71c4;">export</span> <span style="color: #6c71c4;">ORACLE_SID</span>=ora11g

<span style="color: #6c71c4;">export</span> <span style="color: #6c71c4;">ORACLE_HOME</span>=$<span style="color: #6c71c4;">ORACLE_BASE</span>/product/11.2.0/dbhome_1
<span style="color: #6c71c4;">export</span> <span style="color: #6c71c4;">PATH</span>=$<span style="color: #6c71c4;">PATH</span>:$<span style="color: #6c71c4;">ORACLE_HOME</span>/bin

<span style="color: #6c71c4;">export</span> <span style="color: #6c71c4;">LD_LIBRARY_PATH</span>=$<span style="color: #6c71c4;">ORACLE_HOME</span>/lib:/lib:/usr/lib
<span style="color: #6c71c4;">export</span> <span style="color: #6c71c4;">CLASSPATH</span>=$<span style="color: #6c71c4;">ORACLE_HOME</span>/jlib:$<span style="color: #6c71c4;">ORACLE_HOME</span>/rdbms/jlib

<span style="color: #6c71c4;">export</span> <span style="color: #6c71c4;">NLS_LANG</span>=<span style="color: #2aa198;">"AMERICAN.AL32UTF8"</span>

<span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">&#24120;&#29992;&#21035;&#21517;</span>
alias <span style="color: #6c71c4;">cdob</span>=<span style="color: #2aa198;">'cd $ORACLE_BASE'</span>
alias <span style="color: #6c71c4;">cdoh</span>=<span style="color: #2aa198;">'cd $ORACLE_HOME'</span>
alias <span style="color: #6c71c4;">tns</span>=<span style="color: #2aa198;">'cd $ORACLE_HOME/network/admin'</span>
alias <span style="color: #6c71c4;">envo</span>=<span style="color: #2aa198;">'env | grep ORACLE'</span>

<span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">rlwrap must be install</span>
alias <span style="color: #6c71c4;">sp</span>=<span style="color: #2aa198;">'rlwrap sqlplus'</span>
alias <span style="color: #6c71c4;">r</span>=<span style="color: #2aa198;">'rlwrap rman'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org41d3d63" class="outline-3">
<h3 id="org41d3d63"><span class="section-number-3">3.7</span> 创建安装目录</h3>
<div class="outline-text-3" id="text-3-7">
<p>
使用如下命令
</p>
<div class="org-src-container">
<pre class="src src-sh">mkdir -p /u01/app
chown -R oracle:oinstall /u01/app
chmod -R 775 /u01/app
</pre>
</div>
</div>
</div>

<div id="outline-container-org160f73b" class="outline-3">
<h3 id="org160f73b"><span class="section-number-3">3.8</span> 禁用 SELINUXX 和系统防火墙</h3>
<div class="outline-text-3" id="text-3-8">
<p>
编辑 <code>/etc/selinux/config</code> 文件
</p>
<div class="org-src-container">
<pre class="src src-text">SELINUX=disabled
</pre>
</div>
</div>
</div>

<div id="outline-container-org74d845c" class="outline-3">
<h3 id="org74d845c"><span class="section-number-3">3.9</span> 关闭系统的防火墙</h3>
<div class="outline-text-3" id="text-3-9">
<p>
在图形界面中关闭防火墙
</p>
</div>
</div>
</div>

<div id="outline-container-orgef652f7" class="outline-2">
<h2 id="orgef652f7"><span class="section-number-2">4</span> 配置 Oracle 参数</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org55ca87a" class="outline-3">
<h3 id="org55ca87a"><span class="section-number-3">4.1</span> 启动程序</h3>
<div class="outline-text-3" id="text-4-1">
<p>
启动安装程序
</p>
<div class="org-src-container">
<pre class="src src-text"># export DISPLAY=192.168.0.106:0.0
./runInstaller
</pre>
</div>
</div>
</div>

<div id="outline-container-org3e1944b" class="outline-3">
<h3 id="org3e1944b"><span class="section-number-3">4.2</span> Oracle 11g 连通性测试命令行工具</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li><code>tnsping</code> 工具探测工具</li>
<li><code>lsnrctl</code> 可以开启关闭 Oracle 的监听</li>
</ul>

<p>
在启动、关闭或者重启 oracle 监听器之前确保使用 lsnrctl status 命令检查 oracle
监听器的状态：
</p>
<ul class="org-ul">
<li><code>lsnrctl status</code> 检查当前监听器的状态</li>
<li><code>lsnrctl start [listener-name]</code> 启动所有的监听器,可以指定名字来启动特定的监
听器</li>
<li><code>lsnrctl stop [listener-name]</code> 关闭所有的监听器，可以指定名字来关闭特定的监
听器</li>
<li><code>lsnrctl reload</code> 重启监听器，此命令可以代替 <code>lsnrctl stop</code> 和 <code>lsnrctl start</code></li>
</ul>
</div>
</div>

<div id="outline-container-org2cfb922" class="outline-3">
<h3 id="org2cfb922"><span class="section-number-3">4.3</span> 数据库 GUI 管理工具</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li><code>netca</code> 监听器配置助手</li>
<li><code>dbca</code> 数据库配置助手</li>
<li><code>netmgr</code> 网络配置管理工具</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org84a0e70" class="outline-2">
<h2 id="org84a0e70"><span class="section-number-2">5</span> 参考链接</h2>
<div class="outline-text-2" id="text-5">
<p>
1.<a href="http://dbaora.com/">DBAORA</a> Tomasz Lesinski 的个人博客
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Last Updated 2020-01-10 Fri 11:07. Created by Jinghui Hu at 2020-01-08 Wed 11:33.</p>
</div>
</body>
</html>
