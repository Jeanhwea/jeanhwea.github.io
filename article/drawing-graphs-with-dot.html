<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-07-17 Wed 14:55 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>使用 dot 画图工具</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Jinghui Hu" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../readme.html"> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div><div id="content">
<h1 class="title">使用 dot 画图工具</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0605f0c">1. Graphviz 画图工具和 dot 语言</a></li>
<li><a href="#org8d3608f">2. 基本画图</a>
<ul>
<li><a href="#org4aff558">2.1. 图的基本元素</a></li>
<li><a href="#org0e4b413">2.2. 图的属性</a></li>
</ul>
</li>
<li><a href="#org1be9b11">3. 图的属性介绍</a>
<ul>
<li><a href="#orgd180dcb">3.1. 节点形状</a></li>
<li><a href="#org8b6e69b">3.2. 标签文字</a></li>
<li><a href="#org3d53cbe">3.3. HTML 类型标签</a></li>
<li><a href="#orge7a1f4e">3.4. 节点和边的样式</a></li>
<li><a href="#org472d173">3.5. 图的方向，大小和空隙</a></li>
<li><a href="#org6a7dafc">3.6. 节点和边的位置</a></li>
</ul>
</li>
<li><a href="#orgc8034cd">4. 高级特性</a>
<ul>
<li><a href="#org1fd519b">4.1. 节点端口</a></li>
<li><a href="#orga02cb87">4.2. Cluster</a></li>
<li><a href="#orgab93e9d">4.3. 合并边</a></li>
</ul>
</li>
<li><a href="#orgaeee8ec">5. 杂项</a></li>
<li><a href="#org2880da4">6. 举例</a>
<ul>
<li><a href="#org7b08cdf">6.1. ER 图</a></li>
<li><a href="#orgb232661">6.2. 类图</a></li>
</ul>
</li>
</ul>
</div>
</div>


<div id="outline-container-org0605f0c" class="outline-2">
<h2 id="org0605f0c"><span class="section-number-2">1</span> Graphviz 画图工具和 dot 语言</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="http://graphviz.org/">Graphviz</a> 是一个由 AT&amp;T 实验室启动的开源工具包，用于绘制 dot 语言脚本描述的图形。
类似微软的 visio，但是他和 visio 也有很大的不同，他是用代码绘图的，使用一种名
为 dot 的语言绘图，对于绘制复杂的流程图，类图等非常好用。 这种设计使得用户更关
注于逻辑关系，实现 "所思即所得"。Graphviz 的自动布局功能，无需人为干预就可以做
到 "最小化连线交叉"。 关于 dot 画图的一个非常好的文章见 <a href="https://www.graphviz.org/pdf/dotguide.pdf">Drawing graphs with dot</a>
</p>
</div>
</div>

<div id="outline-container-org8d3608f" class="outline-2">
<h2 id="org8d3608f"><span class="section-number-2">2</span> 基本画图</h2>
<div class="outline-text-2" id="text-2">
<p>
dot 可以生成 GIF, PNG, SVG, PDF 和 PostScript 格式的图片。dot 语言画图的类别可
以分成以下两类：
</p>
<ul class="org-ul">
<li><code>digraph</code> 有向图</li>
<li><code>graph</code> 无向图</li>
</ul>
</div>

<div id="outline-container-org4aff558" class="outline-3">
<h3 id="org4aff558"><span class="section-number-3">2.1</span> 图的基本元素</h3>
<div class="outline-text-3" id="text-2-1">
<p>
每种图中包含以下常见要素：
</p>
<ul class="org-ul">
<li><code>node</code> 节点</li>
<li><code>edge</code> 边</li>
<li><code>subgraph</code> 子图</li>
<li><code>attr</code> 属性</li>
</ul>

<div class="org-src-container">
<pre class="src src-dot">digraph basicGraph {
  main -&gt; parse -&gt; execute;
  main -&gt; init;
  main -&gt; cleanup;
  execute -&gt; make_string;
  execute -&gt; printf
  init -&gt; make_string;
  main -&gt; printf;
  execute -&gt; compare;
}
</pre>
</div>

<ul class="org-ul">
<li>dot 语言中每个变量表示一个节点</li>
<li><code>-&gt;</code> 表示连接边</li>
<li>使用 dot 命令编译生成 PNG 图片，示例如下：</li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">dot -Tpng fig.dot -o fig.png
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/basic-graph.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-org0e4b413" class="outline-3">
<h3 id="org0e4b413"><span class="section-number-3">2.2</span> 图的属性</h3>
<div class="outline-text-3" id="text-2-2">
<p>
在绘制图的时候一般需要根据需求来设置节点和边的属性，如下例子中
</p>
<div class="org-src-container">
<pre class="src src-dot">digraph graphAttrs {
  size =<span style="color: #2aa198;">"4,4"</span>;
  main [shape=box];   /* this is a comment */
  main -&gt; parse [weight=8];
  parse -&gt; execute;
  main -&gt; init [style=dotted];
  main -&gt; cleanup;
  execute -&gt; { make_string; printf}
  init -&gt; make_string;
  edge [color=red];   // so is this
  main -&gt; printf [style=bold,label=<span style="color: #2aa198;">"100 times"</span>];
  make_string [label=<span style="color: #2aa198;">"make a\nstring"</span>];
  node [shape=box,style=filled,color=<span style="color: #2aa198;">".7 .3 1.0"</span>];
  execute -&gt; compare;
}
</pre>
</div>

<ul class="org-ul">
<li><code>size</code> 设置图片大小为 4,4（英尺）</li>
<li>节点和边的属性写在方括号里</li>
<li><code>shape=box</code> 设置节点形状为方框</li>
<li>花括号表示一个节点连接多个节点 <code>execute -&gt; { make_string; printf}</code> 等同于
<code>execute -&gt; make_string; execute -&gt; printf;</code></li>
<li>节点和边的文字可以使用 <code>label</code> 属性来设置</li>
</ul>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-attrs.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org1be9b11" class="outline-2">
<h2 id="org1be9b11"><span class="section-number-2">3</span> 图的属性介绍</h2>
<div class="outline-text-2" id="text-3">
<p>
主要的属性可以参考<a href="http://www.graphviz.org/doc/info/attrs.html">attrs</a>。
</p>
</div>

<div id="outline-container-orgd180dcb" class="outline-3">
<h3 id="orgd180dcb"><span class="section-number-3">3.1</span> 节点形状</h3>
<div class="outline-text-3" id="text-3-1">
<p>
节点属性默认设置为 <code>shape=ellipse, width=.75, height=.5</code> 并且使用节点的名字作
为其 label 。节点的形状见 <a href="http://www.graphviz.org/doc/info/shapes.html">shapes</a> 。
</p>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-shapes.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>

<ul class="org-ul">
<li>节点的形状分为两类 <code>polygon-based</code> 和 <code>record-based</code></li>
<li>除了 <code>record</code> 和 <code>Mrecord</code> 属于 <code>record-based</code> 以外，其它都是
<code>polygon-based</code></li>
<li><code>polygon-based</code> 一般直接作为形状</li>
<li><code>record-based</code> 可以用于递归定义</li>
</ul>

<div class="org-src-container">
<pre class="src src-dot">digraph graphLabel {
  node [shape=record];
  struct1 [label=<span style="color: #2aa198;">"&lt;f0&gt; left|&lt;f1&gt; mid\ dle|&lt;f2&gt; right"</span>];
  struct2 [label=<span style="color: #2aa198;">"&lt;f0&gt; one|&lt;f1&gt; two"</span>];
  struct3 [label=<span style="color: #2aa198;">"hello\nworld |{ b |{c|&lt;here&gt; d|e}| f}| g | h"</span>];
  struct1:f1 -&gt; struct2:f0;
  struct1:f2 -&gt; struct3:here;
}
</pre>
</div>

<ul class="org-ul">
<li><code>|</code> 用来分隔域</li>
<li><code>&lt;&gt;</code> 里面是 field<sub>id</sub></li>
<li>label 里面的空格和换行符需要转义</li>
</ul>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-labels.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-org8b6e69b" class="outline-3">
<h3 id="org8b6e69b"><span class="section-number-3">3.2</span> 标签文字</h3>
<div class="outline-text-3" id="text-3-2">
<p>
标签文字默认是
</p>
<ul class="org-ul">
<li>换行需要转义，其中 <code>\n</code>, <code>\l</code>, <code>\r</code> 分别表示换行居中，靠左和靠右。</li>
<li>graph 和 cluster subgraph 也有 label，默认在图片正下方， <code>labelloc=t</code> 将
label 移到图的上方， <code>labelloc=b</code> 将图片移到下面。 <code>labeljust=r</code> 文字靠右。</li>
<li>字体默认是 "Times-Roman 14", 可以设置 <code>fontname</code>, <code>fontsize</code> 和 <code>fontcolor</code>
这些属性。例如： <code>fontname=Helvetica</code></li>
<li>边可以设置两端的 label， <code>headlabel</code> 和 <code>taillabel</code> ，以及 label 的字体
<code>labelfontname</code>, <code>labelfontsize</code> 和 <code>labelfontcolor</code> ，另外如果有需求也可以
设置 <code>labelangle</code> 和 <code>labeldistance</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-dot">digraph graphTextAlign {
  node [shape=record fontname=Arial];
  a [label=<span style="color: #2aa198;">"one\ltwo three\lfour five six seven\l"</span>]
  b [label=<span style="color: #2aa198;">"one\ntwo three\nfour five six seven"</span>]
  c [label=<span style="color: #2aa198;">"one\rtwo three\rfour five six seven\r"</span>]
  a -&gt; b -&gt; c
}
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-text-align.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-org3d53cbe" class="outline-3">
<h3 id="org3d53cbe"><span class="section-number-3">3.3</span> HTML 类型标签</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">
<pre class="src src-dot">digraph graphHtmlLabel {
  node [shape=plaintext]
  struct1 [label=&lt;
           &lt;TABLE BORDER=<span style="color: #2aa198;">"0"</span> CELLBORDER=<span style="color: #2aa198;">"1"</span> CELLSPACING=<span style="color: #2aa198;">"0"</span>&gt;
           &lt;TR&gt;&lt;TD&gt;left&lt;/TD&gt;&lt;TD PORT=<span style="color: #2aa198;">"f1"</span>&gt;mid dle&lt;/TD&gt;&lt;TD PORT=<span style="color: #2aa198;">"f2"</span>&gt;right&lt;/TD&gt;&lt;/TR&gt;
           &lt;/TABLE&gt;&gt;];
  struct2 [label=&lt;
           &lt;TABLE BORDER=<span style="color: #2aa198;">"0"</span> CELLBORDER=<span style="color: #2aa198;">"1"</span> CELLSPACING=<span style="color: #2aa198;">"0"</span>&gt;
           &lt;TR&gt;&lt;TD PORT=<span style="color: #2aa198;">"f0"</span>&gt;one&lt;/TD&gt;&lt;TD&gt;two&lt;/TD&gt;&lt;/TR&gt;
           &lt;/TABLE&gt;&gt;];
  struct3 [label=&lt;
           &lt;TABLE BORDER=<span style="color: #2aa198;">"0"</span> CELLBORDER=<span style="color: #2aa198;">"1"</span> CELLSPACING=<span style="color: #2aa198;">"0"</span> CELLPADDING=<span style="color: #2aa198;">"4"</span>&gt;
           &lt;TR&gt;
           &lt;TD ROWSPAN=<span style="color: #2aa198;">"3"</span>&gt;hello&lt;BR/&gt;world&lt;/TD&gt;
           &lt;TD COLSPAN=<span style="color: #2aa198;">"3"</span>&gt;b&lt;/TD&gt;
           &lt;TD ROWSPAN=<span style="color: #2aa198;">"3"</span>&gt;g&lt;/TD&gt;
           &lt;TD ROWSPAN=<span style="color: #2aa198;">"3"</span>&gt;h&lt;/TD&gt;
           &lt;/TR&gt;
           &lt;TR&gt;
           &lt;TD&gt;c&lt;/TD&gt;&lt;TD PORT=<span style="color: #2aa198;">"here"</span>&gt;d&lt;/TD&gt;&lt;TD&gt;e&lt;/TD&gt;
           &lt;/TR&gt;
           &lt;TR&gt;
           &lt;TD COLSPAN=<span style="color: #2aa198;">"3"</span>&gt;f&lt;/TD&gt;
           &lt;/TR&gt;
           &lt;/TABLE&gt;&gt;];
  struct1:f1 -&gt; struct2:f0;
  struct1:f2 -&gt; struct3:here;
}
</pre>
</div>
<ul class="org-ul">
<li><code>&lt;TD&gt;</code> 的 PORT 表示单元格的名称</li>
</ul>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-html-labels.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>

<p>
使用 Port
</p>
<div class="org-src-container">
<pre class="src src-dot">digraph graphPorts {

  parent [
   shape=plaintext
   label=&lt;
     &lt;table border='1' cellborder='1'&gt;
       &lt;tr&gt;&lt;td colspan=<span style="color: #2aa198;">"3"</span>&gt;The foo, the bar and the baz&lt;/td&gt;&lt;/tr&gt;
       &lt;tr&gt;&lt;td port='port_one'&gt;First port&lt;/td&gt;&lt;td port='port_two'&gt;Second port&lt;/td&gt;&lt;td port='port_three'&gt;Third port&lt;/td&gt;&lt;/tr&gt;
     &lt;/table&gt;
  &gt;];

  child_one [
   shape=plaintext
   label=&lt;
     &lt;table border='1' cellborder='0'&gt;
       &lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;
     &lt;/table&gt;
  &gt;];

  child_two [
   shape=plaintext
   label=&lt;
     &lt;table border='1' cellborder='0'&gt;
       &lt;tr&gt;&lt;td&gt;2&lt;/td&gt;&lt;/tr&gt;
     &lt;/table&gt;
  &gt;];

  child_three [
   shape=plaintext
   label=&lt;
     &lt;table border='1' cellborder='0'&gt;
       &lt;tr&gt;&lt;td&gt;3&lt;/td&gt;&lt;/tr&gt;
     &lt;/table&gt;
  &gt;];

  parent:port_one   -&gt; child_one;
  parent:port_two   -&gt; child_two;
  parent:port_three -&gt; child_three;

}
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-ports.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-orge7a1f4e" class="outline-3">
<h3 id="orge7a1f4e"><span class="section-number-3">3.4</span> 节点和边的样式</h3>
<div class="outline-text-3" id="text-3-4">
<p>
节点和边的颜色使用 <code>color</code> 属性来设置， <code>color</code> 接收以下几种类型的值：
</p>
<ul class="org-ul">
<li>X11 的颜色名称，例如： red, yellow, green</li>
<li>0 到 1 之间表示 HSB 的三元组，例如： "0.83, 0.48, 0.85"</li>
<li>十六进制的 RGB 值，例如： "#DA70D6"</li>
</ul>

<p>
通过 <code>fontcolor</code> 和 <code>fontname</code> 设置字体颜色，例如： <code>fontcolor=white;</code>
<code>fontname=Helvetica;</code> 。样式 <code>style</code> 也有预定义的值，线条属性包括： solid,
dashed, dotted, bold 和 invis；节点属性包括：filled, diagonals 和 rounded。
</p>

<div class="org-src-container">
<pre class="src src-dot">digraph graphStyle {
  solid -&gt; dashed[style=solid; label=solid];
  dashed -&gt; dotted[style=dashed; label=dashed];
  dotted -&gt; bold[style=dotted; label=dotted];
  bold -&gt; invis[style=bold; label=bold];
  solid -&gt; diagonals[style=invis; label=invis];

  solid[style=solid];
  dashed[style=dashed];
  dotted[style=dotted];
  bold[style=bold];
  invis[style=invis];
  filled[style=filled];

  diagonals[style=diagonals];
  rounded[style=rounded];

  { rank=same solid dashed dotted bold invis filled}
  { rank=same diagonals rounded }
}
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-styles.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>

<p>
边有 <code>dir</code> 属性来设置箭头方向，包括：forward, back, both 和 none。还有一些可
以控制箭头的头和尾样式的属性 <code>arrowhead</code> 和 <code>arrowtail</code> 。箭头样式包括：
normal, inv, dot, invdot, odot, invodot, empty 和 none 等等。 <code>arrowsize</code> 设
置箭头的长度，例如 <code>arrowsize=2.0</code> 可以将箭头长度扩大两倍。
</p>

<div class="org-src-container">
<pre class="src src-dot">digraph graphArrows {
  mynode [color=red; style=diagonals];
  b[style=<span style="color: #2aa198;">"bold,filled"</span>];
  c[shape=box,style=<span style="color: #2aa198;">"bold,filled"</span>,color=<span style="color: #2aa198;">"#24a222"</span>,fillcolor=<span style="color: #2aa198;">"#ff7f00"</span>fontcolor=white];
  d[shape=Mrecord,style=filled,color=<span style="color: #2aa198;">"red"</span>,fillcolor=<span style="color: #2aa198;">"#666666"</span>fontcolor=white];
  a -&gt; b [arrowhead=dot];
  a -&gt; c [arrowhead=vee; arrowsize=2];
  a -&gt; d [dir=back, arrowtail=empty];
}
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-arrows.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-org472d173" class="outline-3">
<h3 id="org472d173"><span class="section-number-3">3.5</span> 图的方向，大小和空隙</h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li><code>nodesep</code> 控制同样 rank 节点之间的最小的间距，单位是英尺</li>
<li><code>ranksep</code> 控制不同 rank 之间的间距，单位是英尺。例如： <code>ranksep=equally</code> 表
示所有的 rank 都是等距的</li>
<li><code>size</code> 控制图片大小，单位是英尺。例如: <code>size=x,y</code>, 在命令行中使用 <code>-G</code> 选项</li>
<li><code>ratio</code> 控制图片布局，例如： <code>ratio=compress</code>
<ul class="org-ul">
<li>如果 <code>ratio</code> 没有设置，根据 <code>size</code> 进行绘图</li>
<li>如果 <code>ratio=x</code> ，x 是一个浮点数，对图片大小进行等比缩放</li>
<li>如果 <code>ratio=fill</code> 并且 <code>size=x,y</code> 图片根据 x，y 来进行布局</li>
<li>如果 <code>ratio=compress</code> 并且 <code>size=x,y</code> 根据 x，y 来布局，然后压缩图形</li>
<li>如果 <code>ratio=auto</code> 并且设置 <code>page</code> 属性并且图不能在一页中画满，那么 <code>size</code>
将被忽略</li>
</ul></li>
<li>如果 <code>rotate=90</code> 或者 <code>orientation=landscape</code> ，旋转 90 度水平作图</li>
<li>如果 <code>page=x,y</code> ，则输出页的长宽</li>
<li><code>pagedir</code> 控制也的作图方向，例如 <code>pagedir=BL</code> 表示从下往上，从左往右作图
<ul class="org-ul">
<li><code>B</code> botttom-to-top</li>
<li><code>L</code> left-to-right</li>
<li><code>T</code> top-to-bottom</li>
<li><code>R</code> right-to-left</li>
</ul></li>
<li><code>center=true</code> 居中作图</li>
</ul>
</div>
</div>

<div id="outline-container-org6a7dafc" class="outline-3">
<h3 id="org6a7dafc"><span class="section-number-3">3.6</span> 节点和边的位置</h3>
<div class="outline-text-3" id="text-3-6">
<p>
节点和边的分别通过 <code>rankdir</code> 属性控制
</p>
<ul class="org-ul">
<li><code>LR</code> left-to-right</li>
<li><code>TB</code> top-to-bottom</li>
<li><code>BT</code> bottom-to-top</li>
<li><code>RL</code> right-to-left</li>
</ul>

<p>
对于有时间线的图，子图的 <code>rank</code> 可以设置为：
</p>
<ul class="org-ul">
<li>same 子图中的所有节点属于同一个级别</li>
<li>min 最小级别</li>
<li>source 使得子图中的级别相同，并且严格小于其他节点</li>
<li>max 最大级别</li>
<li>sink</li>
</ul>

<div class="org-src-container">
<pre class="src src-dot">digraph graphRank {
  node [shape=record];
  { rank=same rA sA tA }
  { rank=same uB vB wB }
  rA -&gt; sA;
  sA -&gt; vB;
  t  -&gt; rA;
  uB -&gt; vB;
  wB -&gt; u;
  wB -&gt; tA;
}
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-rank.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc8034cd" class="outline-2">
<h2 id="orgc8034cd"><span class="section-number-2">4</span> 高级特性</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org1fd519b" class="outline-3">
<h3 id="org1fd519b"><span class="section-number-3">4.1</span> 节点端口</h3>
<div class="outline-text-3" id="text-4-1">
<p>
每个节点有 8 个端口可以用于连接： "n", "ne", "e", "se", "s", "sw", "w" 和
"nw"，其中 HTML 标签可以是 <code>&lt;TD&gt;</code> 中的 PORT 属性来指明端口。语法是使用
<code>node_name:port_name</code>
</p>
<div class="org-src-container">
<pre class="src src-dot">digraph graphNodePorts {
  a -&gt; b [tailport=w];
  c:sw -&gt; b:e;
}
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-node-ports.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-orga02cb87" class="outline-3">
<h3 id="orga02cb87"><span class="section-number-3">4.2</span> Cluster</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Cluster 使用一个在特定矩形区域中的子图
</p>
<ul class="org-ul">
<li>Cluster 的子图名称要以 <code>cluster</code> 开头</li>
<li>如果 <code>compound=true</code>, dot 就会允许边将 cluster 和节点相连</li>
</ul>

<div class="org-src-container">
<pre class="src src-dot">digraph graphCluster {
  subgraph cluster_0 {
    style=filled;
    color=lightgrey;
    node [style=filled,color=white];
    a0 -&gt; a1 -&gt; a2 -&gt; a3;
    label = <span style="color: #2aa198;">"process #1"</span>;
  }

  subgraph cluster_1 {
    node [style=filled];
    b0 -&gt; b1 -&gt; b2 -&gt; b3;
    label = <span style="color: #2aa198;">"process #2"</span>;
    color=blue
  }
  start -&gt; a0;
  start -&gt; b0;
  a1 -&gt; b3;
  b2 -&gt; a3;
  a3 -&gt; a0;
  a3 -&gt; end;
  b3 -&gt; end;

  start [shape=Mdiamond];
  end [shape=Msquare];
}
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/graph-cluster.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-orgab93e9d" class="outline-3">
<h3 id="orgab93e9d"><span class="section-number-3">4.3</span> 合并边</h3>
<div class="outline-text-3" id="text-4-3">
<p>
如果 <code>concentrate=true</code> 则 dot 会自动帮忙合并相同的边
</p>
</div>
</div>
</div>

<div id="outline-container-orgaeee8ec" class="outline-2">
<h2 id="orgaeee8ec"><span class="section-number-2">5</span> 杂项</h2>
<div class="outline-text-2" id="text-5">
<p>
<code>strict graph</code> 和 <code>strict digraph</code> 不允许建立重复的边，即每两个节点之间最多只
有一个边。
</p>
</div>
</div>

<div id="outline-container-org2880da4" class="outline-2">
<h2 id="org2880da4"><span class="section-number-2">6</span> 举例</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org7b08cdf" class="outline-3">
<h3 id="org7b08cdf"><span class="section-number-3">6.1</span> ER 图</h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">
<pre class="src src-dot">graph ER_Diagram {
  rankdir=<span style="color: #2aa198;">"LR"</span>;
  bgcolor=<span style="color: #2aa198;">"#e8e8e8"</span>;
  compound=true;
  splines=false;

  node [fontname=<span style="color: #2aa198;">"Helvetia"</span>; fontcolor=<span style="color: #2aa198;">"#ffffff"</span>]

  node [shape=ellipse, style=filled, color=<span style="color: #2aa198;">"#5588a3"</span>];
  student_number; student_name; joined_on;
  course_name; started_on; finished_on;
  value; passed;

  node [shape=box, style=filled, color=<span style="color: #2aa198;">"#145374"</span>, width=2];
  courses; students;

  node [shape=diamond, color=<span style="color: #2aa198;">"#00334e"</span>];
  scores;

  edge[color=<span style="color: #2aa198;">"#000000"</span>, penwidth=1.2];
  {course_name; started_on; finished_on} -- courses:w ;
  scores:e -- {value; passed};
  students:e -- {student_number; student_name; joined_on};
  {
    rank=same
    courses -- scores -- students;
  }
}
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/er-diagram.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>

<div id="outline-container-orgb232661" class="outline-3">
<h3 id="orgb232661"><span class="section-number-3">6.2</span> 类图</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-dot">digraph classDiagram {
  rankdir=TB;
  fontname=<span style="color: #2aa198;">"Helvetia"</span>;
  node[shape=<span style="color: #2aa198;">"record"</span>; fontname=<span style="color: #2aa198;">"Helvetia"</span>];
  edge[fontname=<span style="color: #2aa198;">"Helvetia"</span>, dir=back; arrowtail=empty;];

  animal [label=<span style="color: #2aa198;">"{Animal|+ name : string\l+ age : int\l|+ die() : void\l}"</span>];
  dog [label=<span style="color: #2aa198;">"{Dog| | +bark() : void\l}"</span>];
  cat [label=<span style="color: #2aa198;">"{Cat| | +meow() : void\l}"</span>];

  animal -&gt; dog;
  animal -&gt; cat;
}
</pre>
</div>


<div class="figure">
<p><object type="image/svg+xml" data="../static/image/2019/07/class-diagram.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Last Updated 2019-07-17 Wed 14:55. Created by Jinghui Hu at 2019-07-12 Fri 23:58.</p>
</div>
</body>
</html>
