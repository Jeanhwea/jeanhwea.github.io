<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-07-16 Tue 15:46 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Spring 全家桶</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Jinghui Hu" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../readme.html"> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div><div id="content">
<h1 class="title">Spring 全家桶</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgcbf45e8">1. Spring Framework</a>
<ul>
<li><a href="#org24b6ff7">1.1. Spring 的特性</a></li>
<li><a href="#orgf1aa282">1.2. Spring 的优点</a></li>
</ul>
</li>
<li><a href="#org23f6f3f">2. Spring MVC</a>
<ul>
<li><a href="#orgf9dde34">2.1. Spring MVC 项目包结构</a></li>
</ul>
</li>
<li><a href="#org0cc44d9">3. Spring Boot</a>
<ul>
<li><a href="#org5b50d4a">3.1. 命令行工具</a></li>
<li><a href="#org7ba5dd1">3.2. 编译系统</a>
<ul>
<li><a href="#orgc7112db">3.2.1. 继承父 starter</a></li>
<li><a href="#org652ab2a">3.2.2. Starters</a></li>
</ul>
</li>
<li><a href="#org97ce86f">3.3. Spring Beans 和依赖注入</a></li>
<li><a href="#org0b90ff1">3.4. <code>@SpringBootApplication</code> 标注</a></li>
<li><a href="#org18eb8a0">3.5. 外部配置</a>
<ul>
<li><a href="#orga78255d">3.5.1. <code>@Value</code> 方式配置</a></li>
<li><a href="#orgf135242">3.5.2. <code>@ConfigurationProperties</code> 方式配置</a></li>
</ul>
</li>
<li><a href="#orge57f50f">3.6. 日志</a>
<ul>
<li><a href="#org6033b9c">3.6.1. 日志样式</a></li>
<li><a href="#org08168df">3.6.2. 控制台输出</a></li>
<li><a href="#orge8ff647">3.6.3. 文件输出</a></li>
<li><a href="#org8a06c96">3.6.4. 日志级别</a></li>
<li><a href="#org448e893">3.6.5. 日志分组</a></li>
</ul>
</li>
<li><a href="#org7673493">3.7. 配置数据库</a>
<ul>
<li><a href="#org44eda29">3.7.1. MySQL</a></li>
<li><a href="#orgc420593">3.7.2. PostgreSQL</a></li>
<li><a href="#org99a719a">3.7.3. Oracle</a></li>
<li><a href="#orgbdffcd6">3.7.4. Tomcat 连接池配置</a></li>
</ul>
</li>
<li><a href="#orgdbdceb0">3.8. 开发工具</a></li>
</ul>
</li>
<li><a href="#org189fd4e">4. Spring Data JPA</a></li>
<li><a href="#orgf9dbcb0">5. Spring Cloud</a>
<ul>
<li><a href="#orgec866a0">5.1. Spring Cloud Config</a>
<ul>
<li><a href="#orgb9ef91b">5.1.1. 新建配置文件</a></li>
<li><a href="#orgf7393c9">5.1.2. 中心配置服务器</a></li>
<li><a href="#org5a37c99">5.1.3. 客户端使用自动配置项</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>


<div id="outline-container-orgcbf45e8" class="outline-2">
<h2 id="orgcbf45e8"><span class="section-number-2">1</span> Spring Framework</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="https://spring.io/projects/spring-framework">Spring Framework</a> 是一个开源框架，是为了解决企业应用程序开发复杂性而创建的。框
架的主要优势之一就是其分层架构，分层架构允许您选择使用哪一个组件，同时为 J2EE
应用程序开发提供集成的框架。
</p>
</div>

<div id="outline-container-org24b6ff7" class="outline-3">
<h3 id="org24b6ff7"><span class="section-number-3">1.1</span> Spring 的特性</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>核心技术：依赖注入，事件，资源，i18n，验证，数据绑定，类型转换，SpEL，AOP</li>
<li>测试：模拟对象，TestContext 框架，Spring MVC 测试，WebTestClient。</li>
<li>数据访问：事务，DAO 支持，JDBC，ORM，编组 XML。</li>
<li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc">Spring MVC</a> 和 Spring WebFlux Web 框架</li>
<li>整合：远程处理，JMS，JCA，JMX，电子邮件，任务，调度，缓存。</li>
<li>语言：Kotlin，Groovy，动态语言。</li>
</ul>
</div>
</div>

<div id="outline-container-orgf1aa282" class="outline-3">
<h3 id="orgf1aa282"><span class="section-number-3">1.2</span> Spring 的优点</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>轻量级：Spring 在大小和透明性方面绝对属于轻量级的，基础版本的 Spring 框架大
约只有 2MB。</li>
<li>控制反转(IOC)：Spring 使用控制反转技术实现了松耦合。依赖被注入到对象，而不
是创建或寻找依赖对象。</li>
<li>面向切面编程(AOP)： Spring 支持面向切面编程，同时把应用的业务逻辑与系统的服
务分离开来。</li>
<li>容器：Spring 包含并管理应用程序对象的配置及生命周期。</li>
<li>MVC 框架：Spring 的 Web 框架是一个设计优良的 Web MVC 框架，很好的取代了一些
Web 框架。</li>
<li>事务管理：Spring 对下至本地业务上至全局业务(JAT)提供了统一的事务管理接口。</li>
<li>异常处理：Spring 提供一个方便的 API 将特定技术的异常(由 JDBC, Hibernate, 或
JDO 抛出)转化为一致的、Unchecked 异常。</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org23f6f3f" class="outline-2">
<h2 id="org23f6f3f"><span class="section-number-2">2</span> Spring MVC</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgf9dde34" class="outline-3">
<h3 id="orgf9dde34"><span class="section-number-3">2.1</span> Spring MVC 项目包结构</h3>
<div class="outline-text-3" id="text-2-1">

<div class="figure">
<p><img src="../static/image/2019/07/spring-mvc-module.png" alt="spring-mvc-module.png" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org0cc44d9" class="outline-2">
<h2 id="org0cc44d9"><span class="section-number-2">3</span> Spring Boot</h2>
<div class="outline-text-2" id="text-3">
<p>
<a href="https://spring.io/projects/spring-boot/#overview">Spring Boot</a> 是由 Pivotal 团队提供的全新框架，其设计目的是用来简化新 Spring 应用
的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需
要定义样板化的配置。通过这种方式，Spring Boot 致力于在蓬勃发展的快速应用开发领
域(rapid application development) 成为领导者。Spring Boot 的文档见<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/">html</a> ，源代码
托管于 <a href="https://github.com/spring-projects/spring-boot">GitHub</a> 。
</p>
</div>

<div id="outline-container-org5b50d4a" class="outline-3">
<h3 id="org5b50d4a"><span class="section-number-3">3.1</span> 命令行工具</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Spring Boot 命令行工具参考 <a href="../tool/springboot-cli.html">cli</a>
</p>
</div>
</div>

<div id="outline-container-org7ba5dd1" class="outline-3">
<h3 id="org7ba5dd1"><span class="section-number-3">3.2</span> 编译系统</h3>
<div class="outline-text-3" id="text-3-2">
</div>
<div id="outline-container-orgc7112db" class="outline-4">
<h4 id="orgc7112db"><span class="section-number-4">3.2.1</span> 继承父 starter</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
Spring Boot 项目需要继承的父级 Starter，配置如下：
</p>
<div class="org-src-container">
<pre class="src src-xml"><span style="color: #93a1a1; font-style: italic;">&lt;!-- </span><span style="color: #93a1a1; font-style: italic;">Inherit defaults from Spring Boot </span><span style="color: #93a1a1; font-style: italic;">--&gt;</span>
&lt;<span style="color: #b58900;">parent</span>&gt;
 &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.boot&lt;/<span style="color: #b58900;">groupId</span>&gt;
 &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-boot-starter-parent&lt;/<span style="color: #b58900;">artifactId</span>&gt;
 &lt;<span style="color: #b58900;">version</span>&gt;2.1.0.RELEASE&lt;/<span style="color: #b58900;">version</span>&gt;
&lt;/<span style="color: #b58900;">parent</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org652ab2a" class="outline-4">
<h4 id="org652ab2a"><span class="section-number-4">3.2.2</span> Starters</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
Starters 是 Spring Boot 对其依赖的再打包，官方的 Starter 都是以
<code>spring-boot-starter</code> 开头，并且存放在 <a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-starters">spring-boot-starters</a> 中
</p>
<ul class="org-ul">
<li><code>spring-boot-starter</code> : Core starter, including auto-configuration support,
logging and YAML</li>
<li><code>spring-boot-starter-activemq</code> : Starter for JMS messaging using Apache
ActiveMQ</li>
<li><code>spring-boot-starter-amqp</code> : Starter for using Spring AMQP and Rabbit MQ</li>
<li><code>spring-boot-starter-aop</code> : Starter for aspect-oriented programming with
Spring AOP and AspectJ</li>
<li><code>spring-boot-starter-artemis</code> : Starter for JMS messaging using Apache
Artemis</li>
<li><code>spring-boot-starter-batch</code> : Starter for using Spring Batch</li>
<li><code>spring-boot-starter-cache</code> : Starter for using Spring Framework's caching
support</li>
<li><code>spring-boot-starter-cloud-connectors</code> : Starter for using Spring Cloud
Connectors which simplifies connecting to services in cloud platforms like
Cloud Foundry and Heroku</li>
<li><code>spring-boot-starter-data-cassandra</code> : Starter for using Cassandra
distributed database and Spring Data Cassandra</li>
<li><code>spring-boot-starter-data-cassandra-reactive</code> : Starter for using Cassandra
distributed database and Spring Data Cassandra Reactive</li>
<li><code>spring-boot-starter-data-couchbase</code> : Starter for using Couchbase
document-oriented database and Spring Data Couchbase</li>
<li><code>spring-boot-starter-data-couchbase-reactive</code> : Starter for using Couchbase
document-oriented database and Spring Data Couchbase Reactive</li>
<li><code>spring-boot-starter-data-elasticsearch</code> : Starter for using Elasticsearch
search and analytics engine and Spring Data Elasticsearch</li>
<li><code>spring-boot-starter-data-jdbc</code> : Starter for using Spring Data JDBC</li>
<li><code>spring-boot-starter-data-jpa</code> : Starter for using Spring Data JPA with
Hibernate</li>
<li><code>spring-boot-starter-data-ldap</code> : Starter for using Spring Data LDAP</li>
<li><code>spring-boot-starter-data-mongodb</code> : Starter for using MongoDB
document-oriented database and Spring Data MongoDB</li>
<li><code>spring-boot-starter-data-mongodb-reactive</code> : Starter for using MongoDB
document-oriented database and Spring Data MongoDB Reactive</li>
<li><code>spring-boot-starter-data-neo4j</code> : Starter for using Neo4j graph database
and Spring Data Neo4j</li>
<li><code>spring-boot-starter-data-redis</code> : Starter for using Redis key-value data
store with Spring Data Redis and the Lettuce client</li>
<li><code>spring-boot-starter-data-redis-reactive</code> : Starter for using Redis
key-value data store with Spring Data Redis reactive and the Lettuce client</li>
<li><code>spring-boot-starter-data-rest</code> : Starter for exposing Spring Data
repositories over REST using Spring Data REST</li>
<li><code>spring-boot-starter-data-solr</code> : Starter for using the Apache Solr search
platform with Spring Data Solr</li>
<li><code>spring-boot-starter-freemarker</code> : Starter for building MVC web
applications using FreeMarker views</li>
<li><code>spring-boot-starter-groovy-templates</code> : Starter for building MVC web
applications using Groovy Templates views</li>
<li><code>spring-boot-starter-hateoas</code> : Starter for building hypermedia-based
RESTful web application with Spring MVC and Spring HATEOAS</li>
<li><code>spring-boot-starter-integration</code> : Starter for using Spring Integration</li>
<li><code>spring-boot-starter-jdbc</code> : Starter for using JDBC with the HikariCP
connection pool</li>
<li><code>spring-boot-starter-jersey</code> : Starter for building RESTful web
applications using JAX-RS and Jersey. An alternative to
spring-boot-starter-web</li>
<li><code>spring-boot-starter-jooq</code> : Starter for using jOOQ to access SQL
databases. An alternative to spring-boot-starter-data-jpa or
spring-boot-starter-jdbc</li>
<li><code>spring-boot-starter-json</code> : Starter for reading and writing json</li>
<li><code>spring-boot-starter-jta-atomikos</code> : Starter for JTA transactions using
Atomikos</li>
<li><code>spring-boot-starter-jta-bitronix</code> : Starter for JTA transactions using
Bitronix</li>
<li><code>spring-boot-starter-mail</code> : Starter for using Java Mail and Spring
Framework's email sending support</li>
<li><code>spring-boot-starter-mustache</code> : Starter for building web applications
using Mustache views</li>
<li><code>spring-boot-starter-oauth2-client</code> : Starter for using Spring Security's
OAuth2/OpenID Connect client features</li>
<li><code>spring-boot-starter-oauth2-resource-server</code> : Starter for using Spring
Security's OAuth2 resource server features</li>
<li><code>spring-boot-starter-quartz</code> : Starter for using the Quartz scheduler</li>
<li><code>spring-boot-starter-security</code> : Starter for using Spring Security</li>
<li><code>spring-boot-starter-test</code> : Starter for testing Spring Boot applications
with libraries including JUnit, Hamcrest and Mockito</li>
<li><code>spring-boot-starter-thymeleaf</code> : Starter for building MVC web applications
using Thymeleaf views</li>
<li><code>spring-boot-starter-validation</code> : Starter for using Java Bean Validation
with Hibernate Validator</li>
<li><code>spring-boot-starter-web</code> : Starter for building web, including RESTful,
applications using Spring MVC. Uses Tomcat as the default embedded
container</li>
<li><code>spring-boot-starter-web-services</code> : Starter for using Spring Web Services</li>
<li><code>spring-boot-starter-webflux</code> : Starter for building WebFlux applications
using Spring Framework's Reactive Web support</li>
<li><code>spring-boot-starter-websocket</code> : Starter for building WebSocket
applications using Spring Framework's WebSocket support</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org97ce86f" class="outline-3">
<h3 id="org97ce86f"><span class="section-number-3">3.3</span> Spring Beans 和依赖注入</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Spring Framework 的相关技术在 Spring Boot 工程中都是支持的，常见的标注如下：
</p>
<ul class="org-ul">
<li><code>@ComponentScan</code> : 查找 Beans</li>
<li><code>@Autowired</code> : 注入的构造器</li>
<li><code>@Component</code> : 组件</li>
<li><code>@Repository</code> : 仓库</li>
<li><code>@Service</code> : 服务</li>
<li><code>@Controller</code> : 控制器</li>
</ul>

<p>
下面是依赖注入的示例
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #859900;">package</span> com.example.<span style="color: #268bd2;">service</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">beans</span>.<span style="color: #268bd2;">factory</span>.<span style="color: #268bd2;">annotation</span>.<span style="color: #268bd2;">Autowired</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">stereotype</span>.<span style="color: #268bd2;">Service</span>;

<span style="color: #268bd2;">@Service</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">DatabaseAccountService</span> <span style="color: #859900;">implements</span> <span style="color: #268bd2;">AccountService</span> <span style="color: #8d5649;">{</span>
  <span style="color: #859900;">private</span> <span style="color: #859900;">final</span> <span style="color: #268bd2;">RiskAssessor</span> <span style="color: #6c71c4;">riskAssessor</span>;

  <span style="color: #268bd2;">@Autowired</span>
  <span style="color: #859900;">public</span> <span style="color: #b58900;">DatabaseAccountService</span><span style="color: #d8241f;">(</span><span style="color: #268bd2;">RiskAssessor</span> <span style="color: #6c71c4;">riskAssessor</span><span style="color: #d8241f;">)</span> <span style="color: #d8241f;">{</span>
    <span style="color: #859900;">this</span>.riskAssessor = riskAssessor;
  <span style="color: #d8241f;">}</span>

  <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">...</span>
<span style="color: #8d5649;">}</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #268bd2;">@Service</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">DatabaseAccountService</span> <span style="color: #859900;">implements</span> <span style="color: #268bd2;">AccountService</span> <span style="color: #8d5649;">{</span>
  <span style="color: #859900;">private</span> <span style="color: #859900;">final</span> <span style="color: #268bd2;">RiskAssessor</span> <span style="color: #6c71c4;">riskAssessor</span>;

  <span style="color: #859900;">public</span> <span style="color: #b58900;">DatabaseAccountService</span><span style="color: #d8241f;">(</span><span style="color: #268bd2;">RiskAssessor</span> <span style="color: #6c71c4;">riskAssessor</span><span style="color: #d8241f;">)</span> <span style="color: #d8241f;">{</span>
    <span style="color: #859900;">this</span>.riskAssessor = riskAssessor;
  <span style="color: #d8241f;">}</span>

  <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">...</span>
<span style="color: #8d5649;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0b90ff1" class="outline-3">
<h3 id="org0b90ff1"><span class="section-number-3">3.4</span> <code>@SpringBootApplication</code> 标注</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Spring Framework 提供了下面的基本标注
</p>
<ul class="org-ul">
<li><code>@EnableAutoConfiguration</code> : 开启自动配置</li>
<li><code>@ComponentScan</code> : 开启自动扫描组件</li>
<li><code>@Configuration</code> : 允许在上下文中注册其它的 Bean 或导入其它的配置类</li>
</ul>

<p>
<code>@SpringBootApplication</code> 相当于同时开启了上面三项配置
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #859900;">package</span> com.example.<span style="color: #268bd2;">myapplication</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">boot</span>.<span style="color: #268bd2;">SpringApplication</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">boot</span>.<span style="color: #268bd2;">autoconfigure</span>.<span style="color: #268bd2;">SpringBootApplication</span>;


<span style="color: #268bd2;">@SpringBootApplication</span> <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">same as @Configuration @EnableAutoConfiguration @ComponentScan</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">Application</span> <span style="color: #8d5649;">{</span>

  <span style="color: #859900;">public</span> <span style="color: #859900;">static</span> <span style="color: #268bd2;">void</span> <span style="color: #b58900;">main</span><span style="color: #d8241f;">(</span><span style="color: #268bd2;">String</span><span style="color: #9564bf;">[]</span> <span style="color: #6c71c4;">args</span><span style="color: #d8241f;">)</span> <span style="color: #d8241f;">{</span>
    SpringApplication.run<span style="color: #9564bf;">(</span>Application.<span style="color: #859900;">class</span>, args<span style="color: #9564bf;">)</span>;
  <span style="color: #d8241f;">}</span>

<span style="color: #8d5649;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org18eb8a0" class="outline-3">
<h3 id="org18eb8a0"><span class="section-number-3">3.5</span> 外部配置</h3>
<div class="outline-text-3" id="text-3-5">
<p>
Spring Boot 允许在 web 应用中读取外部配置，方便程序在不同的环境下产生不同行为。
常见的有两种配置方式，两种配置方式对比如下：
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Feature</th>
<th scope="col" class="org-left"><code>@ConfigurationProperties</code></th>
<th scope="col" class="org-left"><code>@Value</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Relaxed binding</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Meta-data support</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">SpEL evaluation</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-orga78255d" class="outline-4">
<h4 id="orga78255d"><span class="section-number-4">3.5.1</span> <code>@Value</code> 方式配置</h4>
<div class="outline-text-4" id="text-3-5-1">
<p>
直接使用注释的方式即可将配置的值读入 Java Bean 中，示例如下：
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #268bd2;">@Component</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">MyBean</span> <span style="color: #8d5649;">{</span>

  <span style="color: #268bd2;">@Value</span><span style="color: #d8241f;">(</span><span style="color: #2aa198;">"${name}"</span><span style="color: #d8241f;">)</span>
  <span style="color: #859900;">private</span> <span style="color: #268bd2;">String</span> <span style="color: #6c71c4;">name</span>;

  <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">...</span>
<span style="color: #8d5649;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf135242" class="outline-4">
<h4 id="orgf135242"><span class="section-number-4">3.5.2</span> <code>@ConfigurationProperties</code> 方式配置</h4>
<div class="outline-text-4" id="text-3-5-2">
<p>
该种配置方法比 <code>@Value</code> 更加安全
</p>

<p>
先定义配置项的 Java Bean
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #859900;">package</span> com.<span style="color: #268bd2;">example</span>;

<span style="color: #859900;">import</span> <span style="color: #268bd2;">java</span>.<span style="color: #268bd2;">net</span>.<span style="color: #268bd2;">InetAddress</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">java</span>.<span style="color: #268bd2;">util</span>.<span style="color: #268bd2;">ArrayList</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">java</span>.<span style="color: #268bd2;">util</span>.<span style="color: #268bd2;">Collections</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">java</span>.<span style="color: #268bd2;">util</span>.<span style="color: #268bd2;">List</span>;

<span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">boot</span>.<span style="color: #268bd2;">context</span>.<span style="color: #268bd2;">properties</span>.<span style="color: #268bd2;">ConfigurationProperties</span>;

<span style="color: #268bd2;">@ConfigurationProperties</span><span style="color: #8d5649;">(</span><span style="color: #2aa198;">"acme"</span><span style="color: #8d5649;">)</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">AcmeProperties</span> <span style="color: #8d5649;">{</span>

  <span style="color: #859900;">private</span> <span style="color: #268bd2;">boolean</span> <span style="color: #6c71c4;">enabled</span>;
  <span style="color: #859900;">private</span> <span style="color: #268bd2;">InetAddress</span> <span style="color: #6c71c4;">remoteAddress</span>;
  <span style="color: #859900;">private</span> <span style="color: #859900;">final</span> <span style="color: #268bd2;">Security</span> <span style="color: #6c71c4;">security</span> = <span style="color: #859900;">new</span> <span style="color: #268bd2;">Security</span><span style="color: #d8241f;">()</span>;

  <span style="color: #859900;">public</span> <span style="color: #268bd2;">boolean</span> <span style="color: #b58900;">isEnabled</span><span style="color: #d8241f;">()</span> <span style="color: #d8241f;">{</span> ... <span style="color: #d8241f;">}</span>
  <span style="color: #859900;">public</span> <span style="color: #268bd2;">void</span> <span style="color: #b58900;">setEnabled</span><span style="color: #d8241f;">(</span><span style="color: #268bd2;">boolean</span> <span style="color: #6c71c4;">enabled</span><span style="color: #d8241f;">)</span> <span style="color: #d8241f;">{</span> ... <span style="color: #d8241f;">}</span>

  <span style="color: #859900;">public</span> <span style="color: #268bd2;">InetAddress</span> <span style="color: #b58900;">getRemoteAddress</span><span style="color: #d8241f;">()</span> <span style="color: #d8241f;">{</span> ... <span style="color: #d8241f;">}</span>
  <span style="color: #859900;">public</span> <span style="color: #268bd2;">void</span> <span style="color: #b58900;">setRemoteAddress</span><span style="color: #d8241f;">(</span><span style="color: #268bd2;">InetAddress</span> <span style="color: #6c71c4;">remoteAddress</span><span style="color: #d8241f;">)</span> <span style="color: #d8241f;">{</span> ... <span style="color: #d8241f;">}</span>

  <span style="color: #859900;">public</span> <span style="color: #268bd2;">Security</span> <span style="color: #b58900;">getSecurity</span><span style="color: #d8241f;">()</span> <span style="color: #d8241f;">{</span> ... <span style="color: #d8241f;">}</span>

  <span style="color: #859900;">public</span> <span style="color: #859900;">static</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">Security</span> <span style="color: #d8241f;">{</span>
    <span style="color: #859900;">private</span> <span style="color: #268bd2;">String</span> <span style="color: #6c71c4;">username</span>;
    <span style="color: #859900;">private</span> <span style="color: #268bd2;">String</span> <span style="color: #6c71c4;">password</span>;
    <span style="color: #859900;">private</span> <span style="color: #268bd2;">List</span><span style="color: #9564bf;">&lt;</span><span style="color: #268bd2;">String</span><span style="color: #9564bf;">&gt;</span> <span style="color: #6c71c4;">roles</span> = <span style="color: #859900;">new</span> <span style="color: #268bd2;">ArrayList</span><span style="color: #9564bf;">&lt;&gt;(</span>Collections.singleton<span style="color: #24a222;">(</span><span style="color: #2aa198;">"USER"</span><span style="color: #24a222;">)</span><span style="color: #9564bf;">)</span>;

    <span style="color: #859900;">public</span> <span style="color: #268bd2;">String</span> <span style="color: #b58900;">getUsername</span><span style="color: #9564bf;">()</span> <span style="color: #9564bf;">{</span> ... <span style="color: #9564bf;">}</span>
    <span style="color: #859900;">public</span> <span style="color: #268bd2;">void</span> <span style="color: #b58900;">setUsername</span><span style="color: #9564bf;">(</span><span style="color: #268bd2;">String</span> <span style="color: #6c71c4;">username</span><span style="color: #9564bf;">)</span> <span style="color: #9564bf;">{</span> ... <span style="color: #9564bf;">}</span>

    <span style="color: #859900;">public</span> <span style="color: #268bd2;">String</span> <span style="color: #b58900;">getPassword</span><span style="color: #9564bf;">()</span> <span style="color: #9564bf;">{</span> ... <span style="color: #9564bf;">}</span>
    <span style="color: #859900;">public</span> <span style="color: #268bd2;">void</span> <span style="color: #b58900;">setPassword</span><span style="color: #9564bf;">(</span><span style="color: #268bd2;">String</span> <span style="color: #6c71c4;">password</span><span style="color: #9564bf;">)</span> <span style="color: #9564bf;">{</span> ... <span style="color: #9564bf;">}</span>

    <span style="color: #859900;">public</span> <span style="color: #268bd2;">List</span><span style="color: #9564bf;">&lt;</span><span style="color: #268bd2;">String</span><span style="color: #9564bf;">&gt;</span> <span style="color: #b58900;">getRoles</span><span style="color: #9564bf;">()</span> <span style="color: #9564bf;">{</span> ... <span style="color: #9564bf;">}</span>
    <span style="color: #859900;">public</span> <span style="color: #268bd2;">void</span> <span style="color: #b58900;">setRoles</span><span style="color: #9564bf;">(</span><span style="color: #268bd2;">List</span><span style="color: #24a222;">&lt;</span><span style="color: #268bd2;">String</span><span style="color: #24a222;">&gt;</span> <span style="color: #6c71c4;">roles</span><span style="color: #9564bf;">)</span> <span style="color: #9564bf;">{</span> ... <span style="color: #9564bf;">}</span>
  <span style="color: #d8241f;">}</span>
<span style="color: #8d5649;">}</span>
</pre>
</div>

<p>
上述的配置类对应于配置文件中的这些配置项
</p>
<ul class="org-ul">
<li><code>acme.enabled</code> 定义一个值，默认为空</li>
<li><code>acme.remote-address</code> 能通过字符串强制转换的类型</li>
<li><code>acme.security.username</code> 自带 Security 对象，用户名</li>
<li><code>acme.security.password</code></li>
<li><code>acme.security.roles</code> 字符串集合</li>
</ul>

<p>
添加配置项，通过 <code>@EnableConfigurationProperties</code> 标注来扫描配置的 Java Bean
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #268bd2;">@Configuration</span>
<span style="color: #268bd2;">@EnableConfigurationProperties</span><span style="color: #8d5649;">(</span>AcmeProperties.<span style="color: #859900;">class</span><span style="color: #8d5649;">)</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">MyConfiguration</span> <span style="color: #8d5649;">{</span>
  <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">...</span>
<span style="color: #8d5649;">}</span>
</pre>
</div>

<p>
并且需要添加 <code>@Configuration</code> 到 Java Bean 中
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #268bd2;">@Component</span>
<span style="color: #268bd2;">@ConfigurationProperties</span><span style="color: #8d5649;">(</span>prefix=<span style="color: #2aa198;">"acme"</span><span style="color: #8d5649;">)</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">AcmeProperties</span> <span style="color: #8d5649;">{</span>
  <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">... see the preceding example</span>
<span style="color: #8d5649;">}</span>
</pre>
</div>

<p>
最后就可以将定义的 Java Bean 配置项注入到其它组件中
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #268bd2;">@Service</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">MyService</span> <span style="color: #8d5649;">{</span>

  <span style="color: #859900;">private</span> <span style="color: #859900;">final</span> <span style="color: #268bd2;">AcmeProperties</span> <span style="color: #6c71c4;">properties</span>;

  <span style="color: #268bd2;">@Autowired</span>
  <span style="color: #859900;">public</span> <span style="color: #b58900;">MyService</span><span style="color: #d8241f;">(</span><span style="color: #268bd2;">AcmeProperties</span> <span style="color: #6c71c4;">properties</span><span style="color: #d8241f;">)</span> <span style="color: #d8241f;">{</span>
    <span style="color: #859900;">this</span>.properties = properties;
  <span style="color: #d8241f;">}</span>

  <span style="color: #93a1a1; font-style: italic;">//</span><span style="color: #93a1a1; font-style: italic;">...</span>

  <span style="color: #268bd2;">@PostConstruct</span>
  <span style="color: #859900;">public</span> <span style="color: #268bd2;">void</span> <span style="color: #b58900;">openConnection</span><span style="color: #d8241f;">()</span> <span style="color: #d8241f;">{</span>
    <span style="color: #268bd2;">Server</span> <span style="color: #6c71c4;">server</span> = <span style="color: #859900;">new</span> <span style="color: #268bd2;">Server</span><span style="color: #9564bf;">(</span><span style="color: #859900;">this</span>.properties.getRemoteAddress<span style="color: #24a222;">()</span><span style="color: #9564bf;">)</span>;
    <span style="color: #93a1a1; font-style: italic;">// </span><span style="color: #93a1a1; font-style: italic;">...</span>
  <span style="color: #d8241f;">}</span>

<span style="color: #8d5649;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge57f50f" class="outline-3">
<h3 id="orge57f50f"><span class="section-number-3">3.6</span> 日志</h3>
<div class="outline-text-3" id="text-3-6">
<p>
Spring Boot 提供了一个统一的日志配置，可以兼容 Java Util Logging、Log4J2 和
Logback 等日志系统作为后端。
</p>
</div>

<div id="outline-container-org6033b9c" class="outline-4">
<h4 id="org6033b9c"><span class="section-number-4">3.6.1</span> 日志样式</h4>
<div class="outline-text-4" id="text-3-6-1">
<p>
默认的输出样式如下：
</p>
<div class="org-src-container">
<pre class="src src-text">2014-03-05 10:57:51.112  INFO 45469 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.52
2014-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2014-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1358 ms
2014-03-05 10:57:51.698  INFO 45469 --- [ost-startStop-1] o.s.b.c.e.ServletRegistrationBean        : Mapping servlet: 'dispatcherServlet' to [/]
2014-03-05 10:57:51.702  INFO 45469 --- [ost-startStop-1] o.s.b.c.embedded.FilterRegistrationBean  : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
</pre>
</div>
<p>
包括以下几个部分：
</p>
<ul class="org-ul">
<li>Date and Time: Millisecond precision and easily sortable.</li>
<li>Log Level: ERROR, WARN, INFO, DEBUG, or TRACE.</li>
<li>Process ID.</li>
<li>A &#x2014; separator to distinguish the start of actual log messages.</li>
<li>Thread name: Enclosed in square brackets (may be truncated for console output).</li>
<li>Logger name: This is usually the source class name (often abbreviated).</li>
<li>The log message</li>
</ul>
</div>
</div>

<div id="outline-container-org08168df" class="outline-4">
<h4 id="org08168df"><span class="section-number-4">3.6.2</span> 控制台输出</h4>
<div class="outline-text-4" id="text-3-6-2">
<p>
控制台输出默认记录 ERROR, WARN 和 INFO 基本的日志，可以使用 <code>--debug</code> 开启调
试级别的输出。
</p>
<div class="org-src-container">
<pre class="src src-sh">java -jar myapp.jar --debug
</pre>
</div>

<p>
也可以在配置文件 <code>application.yml</code> 中设置 <code>debug=true</code>
</p>

<p>
如果控制台支持彩色输出，那么还可以配置彩色输出日志
</p>
<ul class="org-ul">
<li>开启配置文件中的 <code>spring.output.ansi.enabled</code> 选项</li>
<li>使用 <code>%clr(%5p)</code> 可以根据日志基本来变换颜色。各级别对应的颜色： 红色
(FATAL, ERROR)，黄色（INFO），绿色（INFO, DEBUG）</li>
<li>设置日期的颜色 <code>%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){yellow}</code> ，默认支持以下几
种色彩： blue cyan faint green magenta red yellow</li>
</ul>
</div>
</div>

<div id="outline-container-orge8ff647" class="outline-4">
<h4 id="orge8ff647"><span class="section-number-4">3.6.3</span> 文件输出</h4>
<div class="outline-text-4" id="text-3-6-3">
<p>
文件输出通过 <code>logging.file</code> 和 <code>logging.path</code> 来控制
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">logging.file</th>
<th scope="col" class="org-left">logging.path</th>
<th scope="col" class="org-left">Example</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(none)</td>
<td class="org-left">(none)</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">仅开启控制台输出</td>
</tr>

<tr>
<td class="org-left">Specific file</td>
<td class="org-left">(none)</td>
<td class="org-left">my.log</td>
<td class="org-left">输出到文件，文件路径是当前文件夹的相对路径</td>
</tr>

<tr>
<td class="org-left">(none)</td>
<td class="org-left">Specific directory</td>
<td class="org-left">/var/log</td>
<td class="org-left">输出到文件，文件路径可以是相对路径或绝对路径</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li><code>logging.file.max-size</code> 设置文件的最大存储大小</li>
<li><code>logging.file.max-history</code> 设置最大的历史文件数量</li>
</ul>
</div>
</div>

<div id="outline-container-org8a06c96" class="outline-4">
<h4 id="org8a06c96"><span class="section-number-4">3.6.4</span> 日志级别</h4>
<div class="outline-text-4" id="text-3-6-4">
<p>
日志级别可以通过 <code>logging.level.&lt;logger-name&gt;=&lt;level&gt;</code> 来设置，其中
<code>logging.level.root</code> 是设置默认级别
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #6c71c4;">logging.level.root</span>=WARN
<span style="color: #6c71c4;">logging.level.org.springframework.web</span>=DEBUG
<span style="color: #6c71c4;">logging.level.org.hibernate</span>=ERROR
</pre>
</div>
</div>
</div>

<div id="outline-container-org448e893" class="outline-4">
<h4 id="org448e893"><span class="section-number-4">3.6.5</span> 日志分组</h4>
<div class="outline-text-4" id="text-3-6-5">
<p>
日志基本可以通过分组来设置，例如
</p>
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #6c71c4;">logging.group.tomcat</span>=org.apache.catalina, org.apache.coyote, org.apache.tomcat
</pre>
</div>

<p>
Spring Boot 的默认分组有下面几个：
</p>
<ul class="org-ul">
<li>web : <code>org.springframework.core.codec, org.springframework.http, org.springframework.web</code></li>
<li>sql : <code>org.springframework.jdbc.core, org.hibernate.SQL</code></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org7673493" class="outline-3">
<h3 id="org7673493"><span class="section-number-3">3.7</span> 配置数据库</h3>
<div class="outline-text-3" id="text-3-7">
</div>
<div id="outline-container-org44eda29" class="outline-4">
<h4 id="org44eda29"><span class="section-number-4">3.7.1</span> MySQL</h4>
<div class="outline-text-4" id="text-3-7-1">
<p>
<code>application.yml</code> 配置文件中添加用户名、密码等相关信息
</p>
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #6c71c4;">spring</span>:
  <span style="color: #6c71c4;">jpa</span>:
    <span style="color: #6c71c4;">database-platform</span>: org.hibernate.dialect.MySQL5Dialect
  <span style="color: #6c71c4;">datasource</span>:
    <span style="color: #6c71c4;">platform</span>: mysql
    <span style="color: #6c71c4;">username</span>: username
    <span style="color: #6c71c4;">password</span>: password
    <span style="color: #6c71c4;">url</span>: jdbc:mysql://localhost:3306/database?useUnicode=true<span style="color: #b58900;">&amp;characterEncoding</span>=utf-8<span style="color: #b58900;">&amp;useSSL</span>=false
    <span style="color: #6c71c4;">driver-class-name</span>: com.mysql.jdbc.Driver
</pre>
</div>

<p>
<code>pom.xml</code> 文件中添加 MySQL 依赖
</p>
<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #b58900;">dependency</span>&gt;
  &lt;<span style="color: #b58900;">groupId</span>&gt;mysql&lt;/<span style="color: #b58900;">groupId</span>&gt;
  &lt;<span style="color: #b58900;">artifactId</span>&gt;mysql-connector-java&lt;/<span style="color: #b58900;">artifactId</span>&gt;
  &lt;<span style="color: #b58900;">version</span>&gt;5.1.38&lt;/<span style="color: #b58900;">version</span>&gt;
&lt;/<span style="color: #b58900;">dependency</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc420593" class="outline-4">
<h4 id="orgc420593"><span class="section-number-4">3.7.2</span> PostgreSQL</h4>
<div class="outline-text-4" id="text-3-7-2">
<p>
<code>application.yml</code> 配置文件中添加用户名、密码等相关信息
</p>
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #6c71c4;">spring</span>:
  <span style="color: #6c71c4;">jpa</span>:
    <span style="color: #6c71c4;">database-platform</span>: org.hibernate.dialect.PostgreSQL9Dialect
  <span style="color: #6c71c4;">datasource</span>:
    <span style="color: #6c71c4;">platform</span>: postgres
    <span style="color: #6c71c4;">username</span>: username
    <span style="color: #6c71c4;">password</span>: password
    <span style="color: #6c71c4;">url</span>: jdbc:postgresql://localhost:5432/database
    <span style="color: #6c71c4;">driver-class-name</span>: org.postgresql.Driver
</pre>
</div>

<p>
<code>pom.xml</code> 文件中添加 PostgreSQL 依赖
</p>
<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #b58900;">dependency</span>&gt;
  &lt;<span style="color: #b58900;">groupId</span>&gt;org.postgresql&lt;/<span style="color: #b58900;">groupId</span>&gt;
  &lt;<span style="color: #b58900;">artifactId</span>&gt;postgresql&lt;/<span style="color: #b58900;">artifactId</span>&gt;
  &lt;<span style="color: #b58900;">version</span>&gt;42.2.5&lt;/<span style="color: #b58900;">version</span>&gt;
&lt;/<span style="color: #b58900;">dependency</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org99a719a" class="outline-4">
<h4 id="org99a719a"><span class="section-number-4">3.7.3</span> Oracle</h4>
<div class="outline-text-4" id="text-3-7-3">
<p>
<code>application.yml</code> 配置文件中添加用户名、密码等相关信息
</p>
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #6c71c4;">spring</span>:
  <span style="color: #93a1a1; font-style: italic;">### </span><span style="color: #93a1a1; font-style: italic;">oracle 10g ###</span>
  <span style="color: #6c71c4;">jpa</span>:
    <span style="color: #6c71c4;">database-platform</span>: org.hibernate.dialect.Oracle10gDialect
  <span style="color: #6c71c4;">datasource</span>:
    <span style="color: #6c71c4;">username</span>: username
    <span style="color: #6c71c4;">password</span>: password
    <span style="color: #6c71c4;">url</span>: jdbc:oracle:thin:@//localhost:1521/database
    <span style="color: #6c71c4;">driver-class-name</span>: oracle.jdbc.OracleDriver
</pre>
</div>

<p>
<code>pom.xml</code> 文件中添加 PostgreSQL 依赖
</p>
<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #b58900;">dependency</span>&gt;
  &lt;<span style="color: #b58900;">groupId</span>&gt;com.oracle&lt;/<span style="color: #b58900;">groupId</span>&gt;
  &lt;<span style="color: #b58900;">artifactId</span>&gt;ojdbc6&lt;/<span style="color: #b58900;">artifactId</span>&gt;
  &lt;<span style="color: #b58900;">version</span>&gt;11.2.0.4.0&lt;/<span style="color: #b58900;">version</span>&gt;
  &lt;<span style="color: #b58900;">scope</span>&gt;provided&lt;/<span style="color: #b58900;">scope</span>&gt;
&lt;/<span style="color: #b58900;">dependency</span>&gt;
</pre>
</div>

<p>
Oracle 的驱动是收费的，需要手工安装，默认在 <code>$ORACLE_HOME/jdbc/lib/</code> 文件夹中，
文档中对 ojdbc 描述如下：
</p>
<div class="org-src-container">
<pre class="src src-text">Driver Versions
---------------

These are the driver versions in the 10.2.0.1.0 release:

  - JDBC Thin Driver 10.2.0.1.0
    100% Java client-side JDBC driver for use in client applications,
    middle-tier servers and applets.

  - JDBC OCI Driver 10.2.0.1.0
    Client-side JDBC driver for use on a machine where OCI 10.2.0.1.0
    is installed.

  - JDBC Thin Server-side Driver 10.2.0.1.0
    JDBC driver for use in Java program in the database to access
    remote Oracle databases.

  - JDBC Server-side Internal Driver 10.2.0.1.0
    Server-side JDBC driver for use by Java Stored procedures.  This
    driver used to be called the "JDBC Kprb Driver".

For complete documentation, please refer to "JDBC Developer's Guide
and Reference".


Contents Of This Release
------------------------

For all platforms:

  [ORACLE_HOME]/jdbc/lib contains:

  - classes12.jar
    Classes for use with JDK 1.2 and JDK 1.3.  It contains the
    JDBC driver classes, except classes for NLS support in Oracle
    Object and Collection types.

  - classes12_g.jar
    Same as classes12.jar, except that classes were compiled with
    "javac -g" and contain some tracing information.

  - classes12dms.jar
    Same as classes12.jar, except that it contains additional code
    to support Oracle Dynamic Monitoring Service. Can only be used
    when dms.jar is in the classpath. dms.jar is provided as part of
    recent Oracle Application Server releases.

  - classes12dms_g.jar
    Same as classes12dms.jar except that classes were compiled with
    "javac -g" and contain some tracing information.

  - ojdbc14.jar
    Classes for use with JDK 1.4 and 5.0.  It contains the JDBC driver
    classes, except classes for NLS support in Oracle Object and
    Collection types.

  - ojdbc14_g.jar
    Same as ojdbc14.jar, except that classes were compiled with
    "javac -g" and contain some tracing information.

  - ojdbc14dms.jar
    Same as ojdbc14.jar, except that it contains additional code
    to support Oracle Dynamic Monitoring Service. Can only be used
    when dms.jar is in the classpath. dms.jar is provided as part of
    recent Oracle Application Server releases.

  - ojdbc14dms_g.jar
    Same as ojdbc14dms.jar except that classes were compiled with
    "javac -g" and contain some tracing information.

  [ORACLE_HOME]/jdbc/doc/javadoc.tar contains the JDBC Javadoc
  for the public API of the public classes of Oracle JDBC.

  [ORACLE_HOME]/jdbc/demo/demo.tar contains sample JDBC programs.

  [ORACLE_HOME]/jlib/orai18n.jar
    NLS classes for use with JDK 1.2, 1.3, 1.4, and 5.0.  It contains
    classes for NLS support in Oracle Object and Collection types.
    This jar file replaces the old nls_charset jar/zip files. In
    Oracle 10g R1 it was duplicated in [ORACLE_HOME]/jdbc/lib. We
    have removed the duplicate copy and you should now get it from
    its proper location.

</pre>
</div>
<p>
安装适配你项目的 jar 文件即可
</p>
<div class="org-src-container">
<pre class="src src-sh">mvn install:install-file -Dpackaging=jar <span style="color: #2aa198;">\</span>
  -DgroupId=com.oracle -DartifactId=ojdbc6 -Dversion=11.2.0.4.0 <span style="color: #2aa198;">\</span>
  -Dfile=&lt;path-to-jar&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbdffcd6" class="outline-4">
<h4 id="orgbdffcd6"><span class="section-number-4">3.7.4</span> Tomcat 连接池配置</h4>
<div class="outline-text-4" id="text-3-7-4">
<p>
如果你在项目中使用<a href="https://tomcat.apache.org/tomcat-8.0-doc/jdbc-pool.html#Common_Attributes"> Tomcat 连接池</a>作为数据库连接，可能还需要设置的相关参数
</p>
<div class="org-src-container">
<pre class="src src-conf"># Number of ms to wait before throwing an exception if no connection is available.
<span style="color: #6c71c4;">spring.datasource.tomcat.max-wait</span>=10000

# Maximum number of active connections that can be allocated from this pool at the same time.
<span style="color: #6c71c4;">spring.datasource.tomcat.max-active</span>=50

# Validate the connection before borrowing it from the pool.
<span style="color: #6c71c4;">spring.datasource.tomcat.test-on-borrow</span>=true
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgdbdceb0" class="outline-3">
<h3 id="orgdbdceb0"><span class="section-number-3">3.8</span> 开发工具</h3>
<div class="outline-text-3" id="text-3-8">
<p>
Spring Boot 的提供了开发工具套件，可以实现自动加载，仅仅需要在 <code>pom.xml</code> 文件中
加入下面依赖即可自动添加
</p>
<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #b58900;">dependencies</span>&gt;
 &lt;<span style="color: #b58900;">dependency</span>&gt;
  &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.boot&lt;/<span style="color: #b58900;">groupId</span>&gt;
  &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-boot-devtools&lt;/<span style="color: #b58900;">artifactId</span>&gt;
  &lt;<span style="color: #b58900;">optional</span>&gt;true&lt;/<span style="color: #b58900;">optional</span>&gt;
 &lt;/<span style="color: #b58900;">dependency</span>&gt;
&lt;/<span style="color: #b58900;">dependencies</span>&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org189fd4e" class="outline-2">
<h2 id="org189fd4e"><span class="section-number-2">4</span> Spring Data JPA</h2>
<div class="outline-text-2" id="text-4">
<p>
JPA(Java Persistence API)意即 Java 持久化 API，是 Sun 官方在 JDK5.0 后提出的
Java 持久化规范。JPA 的出现主要是为了简化持久层开发以及整合 ORM 技术，结束
Hibernate、TopLink、JDO 等 ORM 框架各自为营的局面。JPA 是在吸收现有 ORM 框架的
基础上发展而来，易于使用，伸缩性强。总的来说，JPA 包括以下 3 方面的技术：
</p>

<ul class="org-ul">
<li>ORM 映射元数据： 支持 XML 和注解两种元数据的形式，元数据描述对象和表之间的映射
关系</li>
<li>API： 操作实体对象来执行 CRUD 操作</li>
<li>查询语言： 通过面向对象而非面向数据库的查询语言（JPQL）查询数据，避免程序的
SQL 语句紧密耦合</li>
</ul>

<p>
<a href="https://spring.io/projects/spring-data-jpa#overview">Spring Data JPA </a>是 Spring Data 家族的一部分，可以轻松实现基于 JPA 的存储库。 此模
块处理对基于 JPA 的数据访问层的增强支持。 它使构建使用数据访问技术的 Spring 驱动应
用程序变得更加容易。其代码托管于 <a href="https://github.com/spring-projects/spring-data-jpa">GitHub</a> ， 文档见 <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/">reference</a> 。
</p>
</div>
</div>

<div id="outline-container-orgf9dbcb0" class="outline-2">
<h2 id="orgf9dbcb0"><span class="section-number-2">5</span> Spring Cloud</h2>
<div class="outline-text-2" id="text-5">
<p>
Spring Cloud 是一系列框架的有序集合。它利用 Spring Boot 的开发便利性巧妙地简化了
分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、
数据监控等，都可以用 Spring Boot 的开发风格做到一键启动和部署。Spring Cloud 并没
有重复制造轮子，它只是将目前各家公司开发的比较成熟、经得起实际考验的服务框架组
合起来，通过 Spring Boot 风格进行再封装屏蔽掉了复杂的配置和实现原理，最终给开发
者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包。
</p>
</div>

<div id="outline-container-orgec866a0" class="outline-3">
<h3 id="orgec866a0"><span class="section-number-3">5.1</span> Spring Cloud Config</h3>
<div class="outline-text-3" id="text-5-1">
<p>
将配置信息中央化保存, 配置 Spring Cloud Bus 可以实现动态修改配置文件
</p>
</div>

<div id="outline-container-orgb9ef91b" class="outline-4">
<h4 id="orgb9ef91b"><span class="section-number-4">5.1.1</span> 新建配置文件</h4>
<div class="outline-text-4" id="text-5-1-1">
<ul class="org-ul">
<li>配置文件命名方式为: <b><b>{appname}-{profile}.yml</b></b>
<ul class="org-ul">
<li>appname 是微服务的名称</li>
<li>profile 是不同的环境，建议用：```dev``` 表示开发环境， ```prod``` 表示线
上运行环境</li>
</ul></li>
<li>对应请求的 URI 有以下几种格式
<ul class="org-ul">
<li>```/{application}/{profile}[/{label}]```</li>
<li>```/{application}-{profile}.yml```</li>
<li>```/{label}/{application}-{profile}.yml```</li>
<li>```/{application}-{profile}.properties```</li>
<li>```/{label}/{application}-{profile}.properties```</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgf7393c9" class="outline-4">
<h4 id="orgf7393c9"><span class="section-number-4">5.1.2</span> 中心配置服务器</h4>
<div class="outline-text-4" id="text-5-1-2">
<div class="org-src-container">
<pre class="src src-xml">&lt;<span style="color: #b58900;">project</span>&gt;
  &lt;<span style="color: #b58900;">dependencies</span>&gt;
    &lt;<span style="color: #b58900;">dependency</span>&gt;
      &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.cloud&lt;/<span style="color: #b58900;">groupId</span>&gt;
      &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-cloud-config-server&lt;/<span style="color: #b58900;">artifactId</span>&gt;
    &lt;/<span style="color: #b58900;">dependency</span>&gt;
    &lt;<span style="color: #b58900;">dependency</span>&gt;
      &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.boot&lt;/<span style="color: #b58900;">groupId</span>&gt;
      &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-boot-starter-test&lt;/<span style="color: #b58900;">artifactId</span>&gt;
      &lt;<span style="color: #b58900;">scope</span>&gt;test&lt;/<span style="color: #b58900;">scope</span>&gt;
    &lt;/<span style="color: #b58900;">dependency</span>&gt;
  &lt;/<span style="color: #b58900;">dependencies</span>&gt;

  &lt;<span style="color: #b58900;">dependencyManagement</span>&gt;
    &lt;<span style="color: #b58900;">dependencies</span>&gt;
      &lt;<span style="color: #b58900;">dependency</span>&gt;
        &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.cloud&lt;/<span style="color: #b58900;">groupId</span>&gt;
        &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-cloud-dependencies&lt;/<span style="color: #b58900;">artifactId</span>&gt;
        &lt;<span style="color: #b58900;">version</span>&gt;Greenwich.SR2&lt;/<span style="color: #b58900;">version</span>&gt;
        &lt;<span style="color: #b58900;">type</span>&gt;pom&lt;/<span style="color: #b58900;">type</span>&gt;
        &lt;<span style="color: #b58900;">scope</span>&gt;import&lt;/<span style="color: #b58900;">scope</span>&gt;
      &lt;/<span style="color: #b58900;">dependency</span>&gt;
    &lt;/<span style="color: #b58900;">dependencies</span>&gt;
  &lt;/<span style="color: #b58900;">dependencyManagement</span>&gt;
&lt;/<span style="color: #b58900;">project</span>&gt;
</pre>
</div>

<p>
中心服务器需要添加 <code>@EnableConfigServer</code> 来启用配置服务器
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">boot</span>.<span style="color: #268bd2;">SpringApplication</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">boot</span>.<span style="color: #268bd2;">autoconfigure</span>.<span style="color: #268bd2;">SpringBootApplication</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">cloud</span>.<span style="color: #268bd2;">config</span>.<span style="color: #268bd2;">server</span>.<span style="color: #268bd2;">EnableConfigServer</span>;

<span style="color: #268bd2;">@SpringBootApplication</span>
<span style="color: #268bd2;">@EnableConfigServer</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">Application</span> <span style="color: #8d5649;">{</span>

  <span style="color: #859900;">public</span> <span style="color: #859900;">static</span> <span style="color: #268bd2;">void</span> <span style="color: #b58900;">main</span><span style="color: #d8241f;">(</span><span style="color: #268bd2;">String</span><span style="color: #9564bf;">[]</span> <span style="color: #6c71c4;">args</span><span style="color: #d8241f;">)</span> <span style="color: #d8241f;">{</span>
    SpringApplication.run<span style="color: #9564bf;">(</span>Application.<span style="color: #859900;">class</span>, args<span style="color: #9564bf;">)</span>;
  <span style="color: #d8241f;">}</span>

<span style="color: #8d5649;">}</span>
</pre>
</div>

<p>
在中心配置服务器中的 <code>application.yml</code> 中添加相应的配置
</p>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #6c71c4;">spring</span>:
  <span style="color: #6c71c4;">profiles</span>:
    <span style="color: #6c71c4;">active</span>: default
  <span style="color: #6c71c4;">cloud</span>:
    <span style="color: #6c71c4;">config</span>:
      <span style="color: #6c71c4;">server</span>:
        <span style="color: #6c71c4;">git</span>:
          <span style="color: #6c71c4;">uri</span>: http://github.com/avic/configfiles.git
          <span style="color: #6c71c4;">searchPaths</span>:
            - path1
            - path2
          <span style="color: #6c71c4;">username</span>: user
          <span style="color: #6c71c4;">password</span>: pass
</pre>
</div>
</div>
</div>

<div id="outline-container-org5a37c99" class="outline-4">
<h4 id="org5a37c99"><span class="section-number-4">5.1.3</span> 客户端使用自动配置项</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
首先修改 <b><b>pom.xml</b></b>, <b><b>application.yml</b></b> 和 <b><b>bootstrap.yml</b></b> 这三项配置文件
</p>

<div class="org-src-container">
<pre class="src src-xml"><span style="color: #93a1a1; font-style: italic;">&lt;!-- </span><span style="color: #93a1a1; font-style: italic;">pom.xml </span><span style="color: #93a1a1; font-style: italic;">--&gt;</span>
&lt;<span style="color: #b58900;">project</span>&gt;
  <span style="color: #93a1a1; font-style: italic;">&lt;!-- </span><span style="color: #93a1a1; font-style: italic;">1. &#28155;&#21152;&#19979;&#38754;&#22235;&#20010;&#20381;&#36182;&#39033; </span><span style="color: #93a1a1; font-style: italic;">--&gt;</span>
  &lt;<span style="color: #b58900;">dependencies</span>&gt;
    &lt;<span style="color: #b58900;">dependency</span>&gt;
      &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.cloud&lt;/<span style="color: #b58900;">groupId</span>&gt;
      &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-cloud-starter-config&lt;/<span style="color: #b58900;">artifactId</span>&gt;
    &lt;/<span style="color: #b58900;">dependency</span>&gt;
    &lt;<span style="color: #b58900;">dependency</span>&gt;
      &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.boot&lt;/<span style="color: #b58900;">groupId</span>&gt;
      &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-boot-starter-actuator&lt;/<span style="color: #b58900;">artifactId</span>&gt;
    &lt;/<span style="color: #b58900;">dependency</span>&gt;
    &lt;<span style="color: #b58900;">dependency</span>&gt;
      &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.boot&lt;/<span style="color: #b58900;">groupId</span>&gt;
      &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-boot-starter-web&lt;/<span style="color: #b58900;">artifactId</span>&gt;
    &lt;/<span style="color: #b58900;">dependency</span>&gt;
    &lt;<span style="color: #b58900;">dependency</span>&gt;
      &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.boot&lt;/<span style="color: #b58900;">groupId</span>&gt;
      &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-boot-starter-test&lt;/<span style="color: #b58900;">artifactId</span>&gt;
      &lt;<span style="color: #b58900;">scope</span>&gt;test&lt;/<span style="color: #b58900;">scope</span>&gt;
    &lt;/<span style="color: #b58900;">dependency</span>&gt;
  &lt;/<span style="color: #b58900;">dependencies</span>&gt;

  <span style="color: #93a1a1; font-style: italic;">&lt;!-- </span><span style="color: #93a1a1; font-style: italic;">2. &#35774;&#32622;&#20381;&#36182;&#31649;&#29702; </span><span style="color: #93a1a1; font-style: italic;">--&gt;</span>
  &lt;<span style="color: #b58900;">dependencyManagement</span>&gt;
    &lt;<span style="color: #b58900;">dependencies</span>&gt;
      &lt;<span style="color: #b58900;">dependency</span>&gt;
        &lt;<span style="color: #b58900;">groupId</span>&gt;org.springframework.cloud&lt;/<span style="color: #b58900;">groupId</span>&gt;
        &lt;<span style="color: #b58900;">artifactId</span>&gt;spring-cloud-dependencies&lt;/<span style="color: #b58900;">artifactId</span>&gt;
        <span style="color: #93a1a1; font-style: italic;">&lt;!-- </span><span style="color: #93a1a1; font-style: italic;">&#36825;&#20010; version &#38656;&#35201;&#21644;&#20320;&#20351;&#29992;&#30340; spring boot &#29256;&#26412;&#36866;&#37197;&#65292;&#21542;&#21017;&#24212;&#29992;&#36215;&#19981;&#26469; </span><span style="color: #93a1a1; font-style: italic;">--&gt;</span>
        &lt;<span style="color: #b58900;">version</span>&gt;Greenwich.SR2&lt;/<span style="color: #b58900;">version</span>&gt;
        <span style="color: #93a1a1; font-style: italic;">&lt;!-- </span><span style="color: #93a1a1; font-style: italic;">&#25105;&#30340;&#39033;&#30446;&#20013; spring boot &#29256;&#26412;&#26159; 2.1.0.RELEASE, &#25152;&#20197; cloud &#30340;&#29256;&#26412;&#20351;&#29992; Greenwich </span><span style="color: #93a1a1; font-style: italic;">--&gt;</span>
        &lt;<span style="color: #b58900;">type</span>&gt;pom&lt;/<span style="color: #b58900;">type</span>&gt;
        &lt;<span style="color: #b58900;">scope</span>&gt;import&lt;/<span style="color: #b58900;">scope</span>&gt;
      &lt;/<span style="color: #b58900;">dependency</span>&gt;
    &lt;/<span style="color: #b58900;">dependencies</span>&gt;
  &lt;/<span style="color: #b58900;">dependencyManagement</span>&gt;

&lt;/<span style="color: #b58900;">project</span>&gt;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">src/main/resources/application.yml</span>
<span style="color: #6c71c4;">management</span>:
  <span style="color: #6c71c4;">endpoints</span>:
    <span style="color: #6c71c4;">web</span>:
      <span style="color: #6c71c4;">exposure</span>:
        <span style="color: #6c71c4;">include</span>: <span style="color: #2aa198;">'*'</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">src/main/resources/bootstrap.yml</span>
<span style="color: #6c71c4;">spring</span>:
  <span style="color: #6c71c4;">application</span>:
    <span style="color: #6c71c4;">name</span>: appname <span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">&#36825;&#37324;&#20889;&#20320;&#39033;&#30446;&#30340;&#21517;&#31216;</span>
  <span style="color: #6c71c4;">profiles</span>:
    <span style="color: #6c71c4;">active</span>: dev   <span style="color: #93a1a1; font-style: italic;"># </span><span style="color: #93a1a1; font-style: italic;">&#36825;&#37324;&#37197;&#32622;&#20320;&#38656;&#35201;&#30340; profile</span>
  <span style="color: #6c71c4;">cloud</span>:
    <span style="color: #6c71c4;">config</span>:
      <span style="color: #6c71c4;">uri</span>: http://192.168.0.231/peizhi
</pre>
</div>

<p>
在系统启动的主类中添加 ```@RefreshScope``` 注解
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">boot</span>.<span style="color: #268bd2;">autoconfigure</span>.<span style="color: #268bd2;">SpringBootApplication</span>;
<span style="color: #859900;">import</span> <span style="color: #268bd2;">org</span>.<span style="color: #268bd2;">springframework</span>.<span style="color: #268bd2;">cloud</span>.<span style="color: #268bd2;">context</span>.<span style="color: #268bd2;">config</span>.<span style="color: #268bd2;">annotation</span>.<span style="color: #268bd2;">RefreshScope</span>;

<span style="color: #268bd2;">@SpringBootApplication</span>
<span style="color: #268bd2;">@RefreshScope</span>
<span style="color: #859900;">public</span> <span style="color: #859900;">class</span> <span style="color: #268bd2;">Application</span> <span style="color: #8d5649;">{</span>
  <span style="color: #859900;">public</span> <span style="color: #859900;">static</span> <span style="color: #268bd2;">void</span> <span style="color: #b58900;">main</span><span style="color: #d8241f;">(</span><span style="color: #268bd2;">String</span><span style="color: #9564bf;">[]</span> <span style="color: #6c71c4;">args</span><span style="color: #d8241f;">)</span> <span style="color: #d8241f;">{</span>
    SpringApplication.run<span style="color: #9564bf;">(</span>Application.<span style="color: #859900;">class</span>, args<span style="color: #9564bf;">)</span>;
  <span style="color: #d8241f;">}</span>
<span style="color: #8d5649;">}</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Last Updated 2019-07-16 Tue 15:46. Created by Jinghui Hu at 2019-07-10 Wed 11:04.</p>
</div>
</body>
</html>
