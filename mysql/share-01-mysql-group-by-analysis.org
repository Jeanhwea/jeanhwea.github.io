#+TITLE: GroupBy语句实现原理探索
#+AUTHOR: Jinghui Hu
#+EMAIL: hujinghui@buaa.edu.cn
#+DATE: <2023-02-02 Thu 11:21:12>
#+HTML_LINK_UP: ../readme.html
#+HTML_LINK_HOME: ../index.html
#+SETUPFILE: ~/.emacs.d/site-lisp/org-html-themes/setup/theme-readtheorg-local.setup
#+PROPERTY: header-args:sql :dbhost 127.0.0.1 :database tech01 :engine mysql :dbuser root :exports both
#+STARTUP: indent cache num inlineimages
#+LATEX_COMPILER: xelatex
#+LATEX_CLASS: beamer
#+LATEX_CLASS_OPTIONS: [presentation]
#+LATEX_HEADER: \usepackage[scheme=plain]{ctex}
#+BEAMER_THEME: Madrid
#+OPTIONS: H:2 toc:t
#+OPTIONS: ^:nil


* 数据准备
** 示例数据介绍
1. [[file:../../../github/datacharmer/test_db/README.md::test_db][test_db]]
2. 导入测试样例数据
   #+BEGIN_SRC sh
     mysql < employees.sql
   #+END_SRC
3. Scheme
[[file:../static/image/2023/0208/103345.png]]

* 整体执行流程
#+BEGIN_SRC perl :results file
  use strict;
  use warnings;

  my $cid = 8;
  my $fout = "/tmp/mysqld-thd-$cid.txt";
  open(FIN, '<:encoding(UTF-8)', "/tmp/mysqld.trace") or die;
  open(FOUT, '>', $fout) or die;

  while (my $line = <FIN>) {
      if ($line =~ /^T\@$cid/) {
          print FOUT $line;
      }
  }

  close(FOUT);
  $fout;
#+END_SRC

#+RESULTS:
[[file:/tmp/mysqld-thd-8.txt]]
